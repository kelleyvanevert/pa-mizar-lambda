<!DOCTYPE HTML>
<html>
<head>
  <title>Lambda calculus</title>
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="res/style.css" />
  <meta charset="utf8">
</head>
<body>
  <ul class="tools">
    <li><a href="#top">▴</a></li>
    <li><a href="#toc">□</a></li>
  </ul>
  
  <div id="container">
    <div id="background"></div>
    <ul class="fragments" id="top">
        
        
        <li>
            <div class="annotation annotation-0">
              
                <h1 id="hd-top">
                  
                  Lambda calculus
                </h1>
              

              
            </div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-1">
              
                <p>Original files:
 <a href="text/lambda.abs">.abs</a>,
 <a href="text/lambda.miz">.miz</a>,
 <a href="dict/lambda.voc">.voc</a></p>
<p><div class="toc" id="toc"><h2>Contents</h2><ul><li class="depth-2"><span class="headnumber depth-2">1</span><span class="contain depth-2"><a href="#hd-1" class="depth-2">Syntax and behaviour</a><ul><li class="depth-3"><span class="headnumber depth-3">1.1</span><span class="contain depth-3"><a href="#hd-1.1" class="depth-3">Lambda terms</a><ul><li class="depth-4"><span class="headnumber depth-4">1.1.1</span><span class="contain depth-4"><a href="#hd-1.1.1" class="depth-4">Preservation under operations</a></span></li></ul></span></li>
<li class="depth-3"><span class="headnumber depth-3">1.2</span><span class="contain depth-3"><a href="#hd-1.2" class="depth-3">Helper definitions</a><ul><li class="depth-4"><span class="headnumber depth-4">1.2.1</span><span class="contain depth-4"><a href="#hd-1.2.1" class="depth-4">Variable occurences</a></span></li>
<li class="depth-4"><span class="headnumber depth-4">1.2.2</span><span class="contain depth-4"><a href="#hd-1.2.2" class="depth-4">Abstraction and application</a></span></li></ul></span></li>
<li class="depth-3"><span class="headnumber depth-3">1.3</span><span class="contain depth-3"><a href="#hd-1.3" class="depth-3">Reduction and conversion</a></span></li></ul></span></li></ul><div style="clear: both;"></div></div></p>
<p>TODO note how we almost never work by inductive/recursive means,
 in constract with, say, Coq.</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-13' id='line-13'>13</a> <span class="comment">:: Environ originally taken from `finseq_2`. Later, I added trees and orders.</span>
<a class='lineno' href='#line-14' id='line-14'>14</a> <span class="keyword">environ</span>
<a class='lineno' href='#line-15' id='line-15'>15</a> 
<a class='lineno' href='#line-16' id='line-16'>16</a>   <span class="comment">:: Vocabularies are basically for Mizar's lexer.</span>
<a class='lineno' href='#line-17' id='line-17'>17</a>   <span class="keyword">vocabularies</span> <span class="reference">LAMBDA</span>,
<a class='lineno' href='#line-18' id='line-18'>18</a>     <span class="reference">FINSET_1</span>,
<a class='lineno' href='#line-19' id='line-19'>19</a>     <span class="reference">NUMBERS</span>,
<a class='lineno' href='#line-20' id='line-20'>20</a>     <span class="reference">NAT_1</span>, <span class="reference">XBOOLE_0</span>, <span class="reference">SUBSET_1</span>, <span class="reference">FINSEQ_1</span>, <span class="reference">XXREAL_0</span>, <span class="reference">CARD_1</span>,
<a class='lineno' href='#line-21' id='line-21'>21</a>     <span class="reference">ARYTM_1</span>, <span class="reference">ARYTM_3</span>, <span class="reference">TARSKI</span>, <span class="reference">ORDINAL4</span>, <span class="reference">FUNCOP_1</span>,
<a class='lineno' href='#line-22' id='line-22'>22</a>     <span class="reference">RELAT_2</span>, <span class="reference">RELAT_1</span>,
<a class='lineno' href='#line-23' id='line-23'>23</a>     <span class="reference">FUNCT_1</span>, <span class="reference">FUNCT_2</span>,
<a class='lineno' href='#line-24' id='line-24'>24</a>     <span class="reference">ZFMISC_1</span>, <span class="reference">PARTFUN1</span>,
<a class='lineno' href='#line-25' id='line-25'>25</a>     <span class="reference">ORDERS_2</span>, <span class="reference">ORDERS_1</span>,
<a class='lineno' href='#line-26' id='line-26'>26</a>     <span class="reference">FINSEQ_2</span>, <span class="reference">PBOOLE</span>, <span class="reference">CARD_3</span>, <span class="reference">VALUED_1</span>,
<a class='lineno' href='#line-27' id='line-27'>27</a>     <span class="reference">TREES_4</span>, <span class="reference">TREES_3</span>, <span class="reference">TREES_2</span>, <span class="reference">TREES_1</span>;
<a class='lineno' href='#line-28' id='line-28'>28</a>   
<a class='lineno' href='#line-29' id='line-29'>29</a>   <span class="comment">:: Radix type specifications</span>
<a class='lineno' href='#line-30' id='line-30'>30</a>   <span class="comment">:: But it also helped [175 unknown attribute format] error with [finite set]</span>
<a class='lineno' href='#line-31' id='line-31'>31</a>   <span class="keyword">notations</span> <span class="reference">FINSET_1</span>,
<a class='lineno' href='#line-32' id='line-32'>32</a>     <span class="reference">TARSKI</span>, <span class="reference">XBOOLE_0</span>, <span class="reference">ENUMSET1</span>, <span class="reference">ZFMISC_1</span>, <span class="reference">SUBSET_1</span>, <span class="reference">ORDINAL1</span>, <span class="reference">CARD_1</span>,
<a class='lineno' href='#line-33' id='line-33'>33</a>     <span class="reference">NUMBERS</span>, <span class="reference">XCMPLX_0</span>, <span class="reference">DOMAIN_1</span>, <span class="reference">NAT_1</span>, <span class="reference">RELAT_1</span>, <span class="reference">PARTFUN1</span>,
<a class='lineno' href='#line-34' id='line-34'>34</a>     <span class="reference">RELAT_2</span>, <span class="reference">RELSET_1</span>,
<a class='lineno' href='#line-35' id='line-35'>35</a>     <span class="reference">FUNCT_1</span>, <span class="reference">FUNCT_2</span>,
<a class='lineno' href='#line-36' id='line-36'>36</a>     <span class="reference">FUNCT_3</span>, <span class="reference">FINSEQ_1</span>, <span class="reference">FINSEQ_2</span>, <span class="reference">BINOP_1</span>, <span class="reference">PBOOLE</span>, <span class="reference">FUNCOP_1</span>, <span class="reference">CARD_3</span>,
<a class='lineno' href='#line-37' id='line-37'>37</a>     <span class="reference">TREES_4</span>, <span class="reference">TREES_3</span>, <span class="reference">TREES_2</span>, <span class="reference">TREES_1</span>,
<a class='lineno' href='#line-38' id='line-38'>38</a>     <span class="reference">ORDERS_1</span>, <span class="reference">ORDERS_2</span>,
<a class='lineno' href='#line-39' id='line-39'>39</a>     <span class="reference">XXREAL_0</span>, <span class="reference">VALUED_1</span>,
<a class='lineno' href='#line-40' id='line-40'>40</a>     <span class="reference">RECDEF_1</span>;
<a class='lineno' href='#line-41' id='line-41'>41</a> 
<a class='lineno' href='#line-42' id='line-42'>42</a>   <span class="comment">:: For modes? (unknown mode format resolved)</span>
<a class='lineno' href='#line-43' id='line-43'>43</a>   <span class="keyword">constructors</span> <span class="reference">RELAT_2</span>, <span class="reference">RELAT_1</span>,
<a class='lineno' href='#line-44' id='line-44'>44</a>     <span class="reference">PARTFUN1</span>, <span class="reference">BINOP_1</span>, <span class="reference">DOMAIN_1</span>,
<a class='lineno' href='#line-45' id='line-45'>45</a>     <span class="reference">FUNCT_1</span>, <span class="reference">FUNCT_2</span>, <span class="reference">FUNCT_3</span>,
<a class='lineno' href='#line-46' id='line-46'>46</a>     <span class="reference">FUNCOP_1</span>,
<a class='lineno' href='#line-47' id='line-47'>47</a>     <span class="reference">RELSET_1</span>,
<a class='lineno' href='#line-48' id='line-48'>48</a>     <span class="reference">SQUARE_1</span>, <span class="reference">NAT_1</span>, <span class="reference">FINSEQ_1</span>, <span class="reference">FINSEQ_2</span>, <span class="reference">PBOOLE</span>, <span class="reference">CARD_3</span>, <span class="reference">VALUED_1</span>, <span class="reference">SETFAM_1</span>,
<a class='lineno' href='#line-49' id='line-49'>49</a>     <span class="reference">TREES_4</span>, <span class="reference">TREES_3</span>, <span class="reference">TREES_2</span>, <span class="reference">TREES_1</span>,
<a class='lineno' href='#line-50' id='line-50'>50</a>     <span class="reference">ORDERS_1</span>, <span class="reference">ORDERS_2</span>,
<a class='lineno' href='#line-51' id='line-51'>51</a>     <span class="reference">RECDEF_1</span>,
<a class='lineno' href='#line-52' id='line-52'>52</a>     <span class="reference">FINSET_1</span>,
<a class='lineno' href='#line-53' id='line-53'>53</a>     <span class="reference">ENUMSET1</span>,
<a class='lineno' href='#line-54' id='line-54'>54</a>     <span class="reference">WELLORD2</span>;
<a class='lineno' href='#line-55' id='line-55'>55</a> 
<a class='lineno' href='#line-56' id='line-56'>56</a>   <span class="comment">:: Definition are for automatically unfolding predicates</span>
<a class='lineno' href='#line-57' id='line-57'>57</a>   <span class="comment">::  in the thesis you are proving</span>
<a class='lineno' href='#line-58' id='line-58'>58</a>   <span class="keyword">definitions</span> <span class="reference">TARSKI</span>,
<a class='lineno' href='#line-59' id='line-59'>59</a>     <span class="reference">FUNCT_1</span>, <span class="reference">FUNCT_2</span>,
<a class='lineno' href='#line-60' id='line-60'>60</a>     <span class="reference">FINSEQ_1</span>, <span class="reference">CARD_1</span>, <span class="reference">PBOOLE</span>, <span class="reference">FUNCOP_1</span>,
<a class='lineno' href='#line-61' id='line-61'>61</a>     <span class="reference">ORDERS_1</span>,
<a class='lineno' href='#line-62' id='line-62'>62</a>     <span class="reference">TREES_4</span>, <span class="reference">TREES_3</span>, <span class="reference">TREES_2</span>, <span class="reference">TREES_1</span>,
<a class='lineno' href='#line-63' id='line-63'>63</a>     <span class="comment">::XTUPLE_0;</span>
<a class='lineno' href='#line-64' id='line-64'>64</a>     <span class="reference">MCART_1</span>; <span class="comment">::, FUNCT_5, RECDEF_1;</span>
<a class='lineno' href='#line-65' id='line-65'>65</a> 
<a class='lineno' href='#line-66' id='line-66'>66</a>   <span class="comment">:: Registrations are for clusters (showing that a type exists (is non-empty),</span>
<a class='lineno' href='#line-67' id='line-67'>67</a>   <span class="comment">::  and automatically adding adjectives)</span>
<a class='lineno' href='#line-68' id='line-68'>68</a>   <span class="keyword">registrations</span> <span class="reference">XBOOLE_0</span>, <span class="reference">SUBSET_1</span>, <span class="reference">ORDINAL1</span>, <span class="reference">PARTFUN1</span>,
<a class='lineno' href='#line-69' id='line-69'>69</a>     <span class="comment">::RELAT_2,</span>
<a class='lineno' href='#line-70' id='line-70'>70</a>     <span class="reference">RELAT_1</span>,
<a class='lineno' href='#line-71' id='line-71'>71</a>     <span class="reference">FUNCT_1</span>, <span class="reference">FUNCT_2</span>,
<a class='lineno' href='#line-72' id='line-72'>72</a>     <span class="reference">FUNCOP_1</span>, <span class="reference">XXREAL_0</span>, <span class="reference">XREAL_0</span>, <span class="reference">NAT_1</span>, <span class="reference">FINSEQ_1</span>, <span class="reference">FINSEQ_2</span>, <span class="reference">CARD_1</span>, <span class="reference">RELSET_1</span>,
<a class='lineno' href='#line-73' id='line-73'>73</a>     <span class="reference">PBOOLE</span>, <span class="reference">CARD_3</span>,
<a class='lineno' href='#line-74' id='line-74'>74</a>     <span class="reference">ORDERS_2</span>,
<a class='lineno' href='#line-75' id='line-75'>75</a>     <span class="reference">TREES_4</span>, <span class="reference">TREES_3</span>, <span class="reference">TREES_2</span>, <span class="reference">TREES_1</span>,
<a class='lineno' href='#line-76' id='line-76'>76</a>     <span class="reference">FINSET_1</span>;
<a class='lineno' href='#line-77' id='line-77'>77</a> 
<a class='lineno' href='#line-78' id='line-78'>78</a>   <span class="comment">:: Load theorem en definition labels</span>
<a class='lineno' href='#line-79' id='line-79'>79</a>   <span class="keyword">theorems</span> <span class="reference">FUNCOP_1</span>, <span class="reference">RELAT_1</span>, <span class="reference">TARSKI</span>, <span class="reference">FINSEQ_1</span>, <span class="reference">FINSEQ_2</span>,
<a class='lineno' href='#line-80' id='line-80'>80</a>     <span class="comment">::XTUPLE_0,</span>
<a class='lineno' href='#line-81' id='line-81'>81</a>     <span class="reference">MCART_1</span>, <span class="reference">FUNCT_5</span>, <span class="comment">:: RECDEF_1,</span>
<a class='lineno' href='#line-82' id='line-82'>82</a>     <span class="reference">FUNCT_1</span>,
<a class='lineno' href='#line-83' id='line-83'>83</a>     <span class="reference">TREES_4</span>, <span class="reference">TREES_3</span>, <span class="reference">TREES_2</span>, <span class="reference">TREES_1</span>,
<a class='lineno' href='#line-84' id='line-84'>84</a>     <span class="reference">XBOOLE_0</span>, <span class="reference">SUBSET_1</span>, <span class="reference">RELAT_2</span>, <span class="reference">ENUMSET1</span>,
<a class='lineno' href='#line-85' id='line-85'>85</a>     <span class="reference">CARD_1</span>, <span class="reference">CARD_2</span>, <span class="reference">CARD_3</span>, <span class="reference">CARD_4</span>;
<a class='lineno' href='#line-86' id='line-86'>86</a>   
<a class='lineno' href='#line-87' id='line-87'>87</a>   <span class="keyword">schemes</span> <span class="reference">RECDEF_1</span>, <span class="reference">TREES_2</span>;
<a class='lineno' href='#line-88' id='line-88'>88</a> 
<a class='lineno' href='#line-89' id='line-89'>89</a>   <span class="keyword">requirements</span> <span class="reference">BOOLE</span>, <span class="reference">SUBSET</span>, <span class="reference">NUMERALS</span>, <span class="reference">ARITHM</span>, <span class="reference">REAL</span>;
<a class='lineno' href='#line-90' id='line-90'>90</a> 
<a class='lineno' href='#line-91' id='line-91'>91</a> <span class="keyword">begin</span></pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-2">
              
                <h2 id="hd-1">
                  
                  <a href="#hd-1" class="headnumber">
                    1
                  </a>
                  
                  Syntax and behaviour
                </h2>
              

              
            </div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-3">
              
                
              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-95' id='line-95'>95</a> <span class="keyword">reserve</span> T,T1,T2 <span class="keyword">for</span> Tree,
<a class='lineno' href='#line-96' id='line-96'>96</a>         D <span class="keyword">for</span> DecoratedTree,
<a class='lineno' href='#line-97' id='line-97'>97</a>         p,q,q2,r <span class="keyword">for</span> FinSequence <span class="keyword">of</span> NAT,
<a class='lineno' href='#line-98' id='line-98'>98</a>         x,y,X,Y <span class="keyword">for</span> set,
<a class='lineno' href='#line-99' id='line-99'>99</a>         i,j,k,l,m,n <span class="keyword">for</span> Element <span class="keyword">of</span> NAT;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-4">
              
                <h3 id="hd-1.1">
                  
                  <a href="#hd-1.1" class="headnumber">
                    1.1
                  </a>
                  
                  Lambda terms
                </h3>
              

              
                <ul class="vocabulary">
                
                
                <li class="type-attr"><a href="#line-128"><code>LambdaTerm-like</code></a></li>
                
                
                <li class="type-mode"><a href="#line-316"><code>LambdaTerm</code></a></li>
                
                
                <li class="type-func"><a href="#line-320"><code>PreAbstractionTerm</code></a></li>
                
                
                <li class="type-func"><a href="#line-336"><code>PreApplicationTerm</code></a></li>
                
                </ul>
              
            </div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-5">
              
                <p>A <em>lambda term</em> is identified with it&#39;s AST (abstract
 syntax tree). More precisely, we identify a lambda term
 with a finite decorated tree.
The nodes of the tree denote either application, abstraction
 or a variable. Using <em>De Bruijn</em> variable indexing, we decorate
 variables with their De Bruijn index (a natural nuber). Note
 that we needn&#39;t explicitly annotate the type of a node,
 as the three types of nodes differ in how many children they must
 have: an application always has two children, an abstraction but one,
 and variables don&#39;t have any. So it suffices to decorate application
 and abstraction nodes with some default value (say, $0$).</p>
<p>In Mizar, a <code>Tree</code> is a non-empty subset of <code>NAT*</code>, so a set of finite
 sequences of natural numbers, such that certain logical properties hold.
Every such sequence denotes a node in the tree, and can be interpreted
 as a <em>path specification</em> (how to get there, from the top). We see, then,
 that lambda term trees are a specific subset of general trees, in which
 only finite sequences of $\{0,1\}$ are used to denote nodes, nodes
 with children are decorated with a $0$, and is also finite in height.
By <em>decorating</em> a node <code>r</code> with a number <code>n</code>, we mean that <code>M.r = n</code>.
Here <code>M</code> is the <code>DecoratedTree of NAT</code> which represents the lambda term.</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-125' id='line-125'>125</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-126' id='line-126'>126</a>   <span class="keyword">let</span> D;
<a class='lineno' href='#line-127' id='line-127'>127</a>   
<a class='lineno' href='#line-128' id='line-128'>128</a>   <span class="keyword">attr</span> D <span class="keyword">is</span> LambdaTerm-like <span class="keyword">means</span>
<a class='lineno' href='#line-129' id='line-129'>129</a>     :<span class="reference">Def1</span>:
<a class='lineno' href='#line-130' id='line-130'>130</a>     dom D <span class="keyword">is</span> finite &amp;
<a class='lineno' href='#line-131' id='line-131'>131</a>     <span class="keyword">for</span> r <span class="keyword">st</span> r <span class="keyword">in</span> dom D <span class="keyword">holds</span>
<a class='lineno' href='#line-132' id='line-132'>132</a>       r <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1} &amp;
<a class='lineno' href='#line-133' id='line-133'>133</a>       ((r^&lt;*0*&gt; <span class="keyword">in</span> dom D &amp; r^&lt;*1*&gt; <span class="keyword">in</span> dom D)
<a class='lineno' href='#line-134' id='line-134'>134</a>           <span class="keyword">implies</span> D.r = 0);
<a class='lineno' href='#line-135' id='line-135'>135</a> <span class="keyword">end</span>;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-6">
              
                <p>Some simple <code>LambdaTerm-like</code> things.</p>
<p>TODO: some more of these simple trees, for easy usage
 later on, when defining application and abstraction.</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-142' id='line-142'>142</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-143' id='line-143'>143</a>   <span class="keyword">cluster</span> { {} } --&gt; 0 -&gt; LambdaTerm-like;
<a class='lineno' href='#line-144' id='line-144'>144</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-145' id='line-145'>145</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-146' id='line-146'>146</a> <span class="set-keyword">    <span class="keyword">set</span></span> D = { {} } --&gt; 0;
<a class='lineno' href='#line-147' id='line-147'>147</a>     dom D = { {} } <span class="keyword">by</span> <span class="reference">FUNCOP_1:13</span>;
<a class='lineno' href='#line-148' id='line-148'>148</a>     <span class="keyword">hence</span> dom D <span class="keyword">is</span> finite;
<a class='lineno' href='#line-149' id='line-149'>149</a>     <span class="keyword">let</span> r <span class="keyword">be</span> FinSequence <span class="keyword">of</span> NAT;
<a class='lineno' href='#line-150' id='line-150'>150</a>     <span class="keyword">assume</span>
<a class='lineno' href='#line-151' id='line-151'>151</a>   A1: r <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-152' id='line-152'>152</a>     dom D = { {} } <span class="keyword">by</span> <span class="reference">FUNCOP_1:13</span>;
<a class='lineno' href='#line-153' id='line-153'>153</a>     <span class="keyword">then</span> r = {} <span class="keyword">by</span> A1, <span class="reference">TARSKI:def 1</span>;
<a class='lineno' href='#line-154' id='line-154'>154</a>     <span class="keyword">then</span> r = &lt;*&gt; {0,1} <span class="keyword">by</span> <span class="reference">FINSEQ_1:def 6</span>;
<a class='lineno' href='#line-155' id='line-155'>155</a>     <span class="keyword">hence</span> r <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1};
<a class='lineno' href='#line-156' id='line-156'>156</a>     <span class="keyword">assume</span> r^&lt;*0*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-157' id='line-157'>157</a>     <span class="keyword">assume</span> r^&lt;*1*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-158' id='line-158'>158</a>     <span class="keyword">thus</span> D.r = 0 <span class="keyword">by</span> A1, <span class="reference">FUNCOP_1:7</span>;
<a class='lineno' href='#line-159' id='line-159'>159</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-160' id='line-160'>160</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-161' id='line-161'>161</a> 
<a class='lineno' href='#line-162' id='line-162'>162</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-163' id='line-163'>163</a>   <span class="keyword">cluster</span> { &lt;*&gt; NAT } -&gt; Tree-like;
<a class='lineno' href='#line-164' id='line-164'>164</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-165' id='line-165'>165</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-166' id='line-166'>166</a>     { &lt;*&gt; NAT } = { {} } <span class="keyword">by</span> <span class="reference">FINSEQ_1:def 6</span>;
<a class='lineno' href='#line-167' id='line-167'>167</a>     <span class="keyword">thus</span> { &lt;*&gt; NAT } <span class="keyword">is</span> Tree-like;
<a class='lineno' href='#line-168' id='line-168'>168</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-169' id='line-169'>169</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-170' id='line-170'>170</a> 
<a class='lineno' href='#line-171' id='line-171'>171</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-172' id='line-172'>172</a>   <span class="keyword">cluster</span> { &lt;*&gt; NAT } --&gt; 0 -&gt; LambdaTerm-like;
<a class='lineno' href='#line-173' id='line-173'>173</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-174' id='line-174'>174</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-175' id='line-175'>175</a>     { &lt;*&gt; NAT } = { {} } <span class="keyword">by</span> <span class="reference">FINSEQ_1:def 6</span>;
<a class='lineno' href='#line-176' id='line-176'>176</a>     <span class="keyword">thus</span> { &lt;*&gt; NAT } --&gt; 0 <span class="keyword">is</span> LambdaTerm-like;
<a class='lineno' href='#line-177' id='line-177'>177</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-178' id='line-178'>178</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-179' id='line-179'>179</a> 
<a class='lineno' href='#line-180' id='line-180'>180</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-181' id='line-181'>181</a>   <span class="keyword">cluster</span> { {}, &lt;*0*&gt; } -&gt; Tree-like;
<a class='lineno' href='#line-182' id='line-182'>182</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-183' id='line-183'>183</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-184' id='line-184'>184</a> <span class="set-keyword">    <span class="keyword">set</span></span> T = { {}, &lt;*0*&gt; };
<a class='lineno' href='#line-185' id='line-185'>185</a>     T = elementary_tree 1 <span class="keyword">by</span> <span class="reference">TREES_1:51</span>;
<a class='lineno' href='#line-186' id='line-186'>186</a>     <span class="keyword">then</span> <span class="keyword">reconsider</span> T <span class="keyword">as</span> Tree;
<a class='lineno' href='#line-187' id='line-187'>187</a>     T <span class="keyword">is</span> Tree-like;
<a class='lineno' href='#line-188' id='line-188'>188</a>     <span class="keyword">hence</span> { {}, &lt;*0*&gt; } <span class="keyword">is</span> Tree-like;
<a class='lineno' href='#line-189' id='line-189'>189</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-190' id='line-190'>190</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-191' id='line-191'>191</a> 
<a class='lineno' href='#line-192' id='line-192'>192</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-193' id='line-193'>193</a>   <span class="keyword">cluster</span> { {}, &lt;*0*&gt; } --&gt; 0 -&gt; LambdaTerm-like;
<a class='lineno' href='#line-194' id='line-194'>194</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-195' id='line-195'>195</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-196' id='line-196'>196</a> <span class="set-keyword">    <span class="keyword">set</span></span> T = { {}, &lt;*0*&gt; };
<a class='lineno' href='#line-197' id='line-197'>197</a>   A6: T <span class="keyword">is</span> finite;
<a class='lineno' href='#line-198' id='line-198'>198</a> <span class="set-keyword">    <span class="keyword">set</span></span> D = T --&gt; 0;
<a class='lineno' href='#line-199' id='line-199'>199</a>   A2: dom D = T <span class="keyword">by</span> <span class="reference">FUNCOP_1:13</span>;
<a class='lineno' href='#line-200' id='line-200'>200</a>     <span class="keyword">hence</span> dom D <span class="keyword">is</span> finite <span class="keyword">by</span> A6;
<a class='lineno' href='#line-201' id='line-201'>201</a>     <span class="keyword">reconsider</span> T <span class="keyword">as</span> Tree;
<a class='lineno' href='#line-202' id='line-202'>202</a>     <span class="keyword">let</span> r <span class="keyword">be</span> FinSequence <span class="keyword">of</span> NAT;
<a class='lineno' href='#line-203' id='line-203'>203</a>     <span class="keyword">assume</span>
<a class='lineno' href='#line-204' id='line-204'>204</a>   A1: r <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-205' id='line-205'>205</a>     <span class="keyword">then</span>
<a class='lineno' href='#line-206' id='line-206'>206</a>   A3: r = {} <span class="keyword">or</span> r = &lt;*0*&gt; <span class="keyword">by</span> A1, A2, <span class="reference">TARSKI:def 2</span>;
<a class='lineno' href='#line-207' id='line-207'>207</a>     <span class="keyword">per</span> <span class="keyword">cases</span>;
<a class='lineno' href='#line-208' id='line-208'>208</a>     <span class="keyword">suppose</span> r = {};
<a class='lineno' href='#line-209' id='line-209'>209</a> <span class="error">::&gt;       *60</span>
<a class='lineno' href='#line-210' id='line-210'>210</a>       <span class="keyword">then</span> r = &lt;*&gt; {0,1} <span class="keyword">by</span> <span class="reference">FINSEQ_1:def 6</span>;
<a class='lineno' href='#line-211' id='line-211'>211</a>       <span class="keyword">hence</span> r <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1};
<a class='lineno' href='#line-212' id='line-212'>212</a>       <span class="keyword">assume</span> r^&lt;*0*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-213' id='line-213'>213</a>       <span class="keyword">assume</span> r^&lt;*1*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-214' id='line-214'>214</a>       <span class="comment">::thus D.r = 0 by A1, FUNCOP_1:7;</span>
<a class='lineno' href='#line-215' id='line-215'>215</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-216' id='line-216'>216</a>     <span class="keyword">suppose</span>
<a class='lineno' href='#line-217' id='line-217'>217</a>     A5: <span class="keyword">not</span> r = {};
<a class='lineno' href='#line-218' id='line-218'>218</a> <span class="set-keyword">      <span class="keyword">set</span></span> ZeroOne = {0,1};
<a class='lineno' href='#line-219' id='line-219'>219</a>       <span class="keyword">reconsider</span> ZeroOne <span class="keyword">as</span> non empty set;
<a class='lineno' href='#line-220' id='line-220'>220</a> <span class="set-keyword">      <span class="keyword">set</span></span> Zero = 0;
<a class='lineno' href='#line-221' id='line-221'>221</a>       Zero <span class="keyword">in</span> {0,1} <span class="keyword">by</span> <span class="reference">TARSKI:def 2</span>;
<a class='lineno' href='#line-222' id='line-222'>222</a>       <span class="keyword">then</span> <span class="keyword">reconsider</span> Zero <span class="keyword">as</span> Element <span class="keyword">of</span> ZeroOne;
<a class='lineno' href='#line-223' id='line-223'>223</a>     A4: &lt;*Zero*&gt; <span class="keyword">is</span> FinSequence <span class="keyword">of</span> ZeroOne;
<a class='lineno' href='#line-224' id='line-224'>224</a>       r = &lt;*0*&gt; <span class="keyword">by</span> A3, A5
<a class='lineno' href='#line-225' id='line-225'>225</a>        .= &lt;*Zero*&gt;;
<a class='lineno' href='#line-226' id='line-226'>226</a>       <span class="keyword">hence</span> r <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1} <span class="keyword">by</span> A4;
<a class='lineno' href='#line-227' id='line-227'>227</a>       <span class="keyword">assume</span> r^&lt;*0*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-228' id='line-228'>228</a>       <span class="keyword">assume</span> r^&lt;*1*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-229' id='line-229'>229</a>       <span class="keyword">thus</span> D.r = 0 <span class="keyword">by</span> A1, <span class="reference">FUNCOP_1:7</span>;
<a class='lineno' href='#line-230' id='line-230'>230</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-231' id='line-231'>231</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-232' id='line-232'>232</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-233' id='line-233'>233</a> 
<a class='lineno' href='#line-234' id='line-234'>234</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-235' id='line-235'>235</a>   <span class="keyword">cluster</span> { {}, &lt;*0*&gt;, &lt;*1*&gt; } -&gt; Tree-like;
<a class='lineno' href='#line-236' id='line-236'>236</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-237' id='line-237'>237</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-238' id='line-238'>238</a> <span class="set-keyword">    <span class="keyword">set</span></span> T = { {}, &lt;*0*&gt;, &lt;*1*&gt; };
<a class='lineno' href='#line-239' id='line-239'>239</a>     T = elementary_tree 2 <span class="keyword">by</span> <span class="reference">TREES_1:53</span>;
<a class='lineno' href='#line-240' id='line-240'>240</a>     <span class="keyword">then</span> <span class="keyword">reconsider</span> T <span class="keyword">as</span> Tree;
<a class='lineno' href='#line-241' id='line-241'>241</a>     T <span class="keyword">is</span> Tree-like;
<a class='lineno' href='#line-242' id='line-242'>242</a>     <span class="keyword">hence</span> { {}, &lt;*0*&gt;, &lt;*1*&gt; } <span class="keyword">is</span> Tree-like;
<a class='lineno' href='#line-243' id='line-243'>243</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-244' id='line-244'>244</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-245' id='line-245'>245</a> 
<a class='lineno' href='#line-246' id='line-246'>246</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-247' id='line-247'>247</a>   <span class="keyword">cluster</span> { {}, &lt;*0*&gt;, &lt;*1*&gt; } --&gt; 0 -&gt; LambdaTerm-like;
<a class='lineno' href='#line-248' id='line-248'>248</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-249' id='line-249'>249</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-250' id='line-250'>250</a> <span class="set-keyword">    <span class="keyword">set</span></span> T = { {}, &lt;*0*&gt;, &lt;*1*&gt; };
<a class='lineno' href='#line-251' id='line-251'>251</a>   A6: T <span class="keyword">is</span> finite;
<a class='lineno' href='#line-252' id='line-252'>252</a> <span class="set-keyword">    <span class="keyword">set</span></span> D = T --&gt; 0;
<a class='lineno' href='#line-253' id='line-253'>253</a>   A2: dom D = T <span class="keyword">by</span> <span class="reference">FUNCOP_1:13</span>;
<a class='lineno' href='#line-254' id='line-254'>254</a>     <span class="keyword">hence</span> dom D <span class="keyword">is</span> finite <span class="keyword">by</span> A6;
<a class='lineno' href='#line-255' id='line-255'>255</a>     <span class="keyword">reconsider</span> T <span class="keyword">as</span> Tree;
<a class='lineno' href='#line-256' id='line-256'>256</a>     <span class="keyword">let</span> r <span class="keyword">be</span> FinSequence <span class="keyword">of</span> NAT;
<a class='lineno' href='#line-257' id='line-257'>257</a>     <span class="keyword">assume</span>
<a class='lineno' href='#line-258' id='line-258'>258</a>   A1: r <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-259' id='line-259'>259</a>     <span class="keyword">then</span>
<a class='lineno' href='#line-260' id='line-260'>260</a>   A3: r = {} <span class="keyword">or</span> r = &lt;*0*&gt; <span class="keyword">or</span> r = &lt;*1*&gt; <span class="keyword">by</span> A1, A2, <span class="reference">ENUMSET1:def 1</span>;
<a class='lineno' href='#line-261' id='line-261'>261</a>     <span class="keyword">per</span> <span class="keyword">cases</span>;
<a class='lineno' href='#line-262' id='line-262'>262</a>     <span class="keyword">suppose</span> r = {};
<a class='lineno' href='#line-263' id='line-263'>263</a>       <span class="keyword">then</span> r = &lt;*&gt; {0,1} <span class="keyword">by</span> <span class="reference">FINSEQ_1:def 6</span>;
<a class='lineno' href='#line-264' id='line-264'>264</a>       <span class="keyword">hence</span> r <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1};
<a class='lineno' href='#line-265' id='line-265'>265</a>       <span class="keyword">assume</span> r^&lt;*0*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-266' id='line-266'>266</a>       <span class="keyword">assume</span> r^&lt;*1*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-267' id='line-267'>267</a>       <span class="keyword">thus</span> D.r = 0 <span class="keyword">by</span> A1, <span class="reference">FUNCOP_1:7</span>;
<a class='lineno' href='#line-268' id='line-268'>268</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-269' id='line-269'>269</a>     <span class="keyword">suppose</span>
<a class='lineno' href='#line-270' id='line-270'>270</a>     A5: r = &lt;*0*&gt;;
<a class='lineno' href='#line-271' id='line-271'>271</a> <span class="set-keyword">      <span class="keyword">set</span></span> ZeroOne = {0,1};
<a class='lineno' href='#line-272' id='line-272'>272</a>       <span class="keyword">reconsider</span> ZeroOne <span class="keyword">as</span> non empty set;
<a class='lineno' href='#line-273' id='line-273'>273</a> <span class="set-keyword">      <span class="keyword">set</span></span> Zero = 0;
<a class='lineno' href='#line-274' id='line-274'>274</a>       Zero <span class="keyword">in</span> {0,1} <span class="keyword">by</span> <span class="reference">TARSKI:def 2</span>;
<a class='lineno' href='#line-275' id='line-275'>275</a>       <span class="keyword">then</span> <span class="keyword">reconsider</span> Zero <span class="keyword">as</span> Element <span class="keyword">of</span> ZeroOne;
<a class='lineno' href='#line-276' id='line-276'>276</a>     A4: &lt;*Zero*&gt; <span class="keyword">is</span> FinSequence <span class="keyword">of</span> ZeroOne;
<a class='lineno' href='#line-277' id='line-277'>277</a>       r = &lt;*0*&gt; <span class="keyword">by</span> A5
<a class='lineno' href='#line-278' id='line-278'>278</a>        .= &lt;*Zero*&gt;;
<a class='lineno' href='#line-279' id='line-279'>279</a>       <span class="keyword">hence</span> r <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1} <span class="keyword">by</span> A4;
<a class='lineno' href='#line-280' id='line-280'>280</a>       <span class="keyword">assume</span> r^&lt;*0*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-281' id='line-281'>281</a>       <span class="keyword">assume</span> r^&lt;*1*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-282' id='line-282'>282</a>       <span class="keyword">thus</span> D.r = 0 <span class="keyword">by</span> A1, <span class="reference">FUNCOP_1:7</span>;
<a class='lineno' href='#line-283' id='line-283'>283</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-284' id='line-284'>284</a>     <span class="keyword">suppose</span> <span class="keyword">not</span> (r = {} <span class="keyword">or</span> r = &lt;*0*&gt;);
<a class='lineno' href='#line-285' id='line-285'>285</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-286' id='line-286'>286</a>     A7: r = &lt;*1*&gt; <span class="keyword">by</span> A3;
<a class='lineno' href='#line-287' id='line-287'>287</a> <span class="set-keyword">      <span class="keyword">set</span></span> ZeroOne = {0,1};
<a class='lineno' href='#line-288' id='line-288'>288</a>       <span class="keyword">reconsider</span> ZeroOne <span class="keyword">as</span> non empty set;
<a class='lineno' href='#line-289' id='line-289'>289</a> <span class="set-keyword">      <span class="keyword">set</span></span> One = 1;
<a class='lineno' href='#line-290' id='line-290'>290</a>       One <span class="keyword">in</span> {0,1} <span class="keyword">by</span> <span class="reference">TARSKI:def 2</span>;
<a class='lineno' href='#line-291' id='line-291'>291</a>       <span class="keyword">then</span> <span class="keyword">reconsider</span> One <span class="keyword">as</span> Element <span class="keyword">of</span> ZeroOne;
<a class='lineno' href='#line-292' id='line-292'>292</a>     A4: &lt;*One*&gt; <span class="keyword">is</span> FinSequence <span class="keyword">of</span> ZeroOne;
<a class='lineno' href='#line-293' id='line-293'>293</a>       r = &lt;*1*&gt; <span class="keyword">by</span> A7
<a class='lineno' href='#line-294' id='line-294'>294</a>        .= &lt;*One*&gt;;
<a class='lineno' href='#line-295' id='line-295'>295</a>       <span class="keyword">hence</span> r <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1};
<a class='lineno' href='#line-296' id='line-296'>296</a>       <span class="keyword">assume</span> r^&lt;*0*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-297' id='line-297'>297</a>       <span class="keyword">assume</span> r^&lt;*1*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-298' id='line-298'>298</a>       <span class="keyword">thus</span> D.r = 0 <span class="keyword">by</span> A1, <span class="reference">FUNCOP_1:7</span>;
<a class='lineno' href='#line-299' id='line-299'>299</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-300' id='line-300'>300</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-301' id='line-301'>301</a> <span class="keyword">end</span>;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-7">
              
                <p>And then we can easily define a <code>LambdaTerm-like</code> cluster,
 and make a mode <code>LambdaTerm</code> out of it.</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-305' id='line-305'>305</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-306' id='line-306'>306</a>   <span class="keyword">cluster</span> LambdaTerm-like <span class="keyword">for</span> DecoratedTree <span class="keyword">of</span> NAT;
<a class='lineno' href='#line-307' id='line-307'>307</a>   <span class="keyword">existence</span>
<a class='lineno' href='#line-308' id='line-308'>308</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-309' id='line-309'>309</a> <span class="set-keyword">    <span class="keyword">set</span></span> D = { {} } --&gt; 0;
<a class='lineno' href='#line-310' id='line-310'>310</a>     <span class="keyword">take</span> D;
<a class='lineno' href='#line-311' id='line-311'>311</a>     <span class="keyword">thus</span> D <span class="keyword">is</span> LambdaTerm-like;
<a class='lineno' href='#line-312' id='line-312'>312</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-313' id='line-313'>313</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-314' id='line-314'>314</a> 
<a class='lineno' href='#line-315' id='line-315'>315</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-316' id='line-316'>316</a>   <span class="keyword">mode</span> LambdaTerm <span class="keyword">is</span> LambdaTerm-like DecoratedTree <span class="keyword">of</span> NAT;
<a class='lineno' href='#line-317' id='line-317'>317</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-318' id='line-318'>318</a> 
<a class='lineno' href='#line-319' id='line-319'>319</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-320' id='line-320'>320</a>   <span class="keyword">func</span> PreAbstractionTerm -&gt; LambdaTerm <span class="keyword">equals</span>
<a class='lineno' href='#line-321' id='line-321'>321</a>     { {}, &lt;*0*&gt; } --&gt; 0;
<a class='lineno' href='#line-322' id='line-322'>322</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-323' id='line-323'>323</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-324' id='line-324'>324</a> <span class="set-keyword">    <span class="keyword">set</span></span> T = { {}, &lt;*0*&gt; };
<a class='lineno' href='#line-325' id='line-325'>325</a>     <span class="keyword">reconsider</span> T <span class="keyword">as</span> Tree;
<a class='lineno' href='#line-326' id='line-326'>326</a> <span class="set-keyword">    <span class="keyword">set</span></span> D = T --&gt; 0;
<a class='lineno' href='#line-327' id='line-327'>327</a>     <span class="keyword">reconsider</span> D <span class="keyword">as</span> DecoratedTree <span class="keyword">of</span> NAT;
<a class='lineno' href='#line-328' id='line-328'>328</a>     D <span class="keyword">is</span> LambdaTerm-like;
<a class='lineno' href='#line-329' id='line-329'>329</a>     <span class="keyword">then</span> <span class="keyword">reconsider</span> D <span class="keyword">as</span> LambdaTerm;
<a class='lineno' href='#line-330' id='line-330'>330</a>     D <span class="keyword">is</span> LambdaTerm;
<a class='lineno' href='#line-331' id='line-331'>331</a>     <span class="keyword">hence</span> { {}, &lt;*0*&gt; } --&gt; 0 <span class="keyword">is</span> LambdaTerm;
<a class='lineno' href='#line-332' id='line-332'>332</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-333' id='line-333'>333</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-334' id='line-334'>334</a> 
<a class='lineno' href='#line-335' id='line-335'>335</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-336' id='line-336'>336</a>   <span class="keyword">func</span> PreApplicationTerm -&gt; LambdaTerm <span class="keyword">equals</span>
<a class='lineno' href='#line-337' id='line-337'>337</a>     { {}, &lt;*0*&gt;, &lt;*1*&gt; } --&gt; 0;
<a class='lineno' href='#line-338' id='line-338'>338</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-339' id='line-339'>339</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-340' id='line-340'>340</a> <span class="set-keyword">    <span class="keyword">set</span></span> T = { {}, &lt;*0*&gt;, &lt;*1*&gt; };
<a class='lineno' href='#line-341' id='line-341'>341</a>     <span class="keyword">reconsider</span> T <span class="keyword">as</span> Tree;
<a class='lineno' href='#line-342' id='line-342'>342</a> <span class="set-keyword">    <span class="keyword">set</span></span> D = T --&gt; 0;
<a class='lineno' href='#line-343' id='line-343'>343</a>     <span class="keyword">reconsider</span> D <span class="keyword">as</span> DecoratedTree <span class="keyword">of</span> NAT;
<a class='lineno' href='#line-344' id='line-344'>344</a>     D <span class="keyword">is</span> LambdaTerm-like;
<a class='lineno' href='#line-345' id='line-345'>345</a>     <span class="keyword">then</span> <span class="keyword">reconsider</span> D <span class="keyword">as</span> LambdaTerm;
<a class='lineno' href='#line-346' id='line-346'>346</a>     D <span class="keyword">is</span> LambdaTerm;
<a class='lineno' href='#line-347' id='line-347'>347</a>     <span class="keyword">hence</span> { {}, &lt;*0*&gt;, &lt;*1*&gt; } --&gt; 0 <span class="keyword">is</span> LambdaTerm;
<a class='lineno' href='#line-348' id='line-348'>348</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-349' id='line-349'>349</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-350' id='line-350'>350</a> 
<a class='lineno' href='#line-351' id='line-351'>351</a> <span class="keyword">reserve</span> M,N,P,Q <span class="keyword">for</span> LambdaTerm;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-8">
              
                <h4 id="hd-1.1.1">
                  
                  <a href="#hd-1.1.1" class="headnumber">
                    1.1.1
                  </a>
                  
                  Preservation under operations
                </h4>
              

              
            </div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-9">
              
                <p><code>LambdaTerm</code>s are preserved under taking subterms, and composing
 terms. We&#39;ll register this knowledge in the type system.</p>
<p>Let Mizar know that <code>M|r</code> is also a <code>LambdaTerm</code>.
The definition of <code>|</code> that we are using is the definition
 that operates on (and returns) a <code>DecoratedTree</code>. Showing
 that retricting a <code>LambdaTerm</code> produces a <code>LambdaTerm-like</code>
 result ensures us that the result is a <code>LambdaTerm</code>.</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-363' id='line-363'>363</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-364' id='line-364'>364</a>   <span class="keyword">let</span> M <span class="keyword">be</span> LambdaTerm,
<a class='lineno' href='#line-365' id='line-365'>365</a>       r <span class="keyword">be</span> Element <span class="keyword">of</span> dom M;
<a class='lineno' href='#line-366' id='line-366'>366</a> 
<a class='lineno' href='#line-367' id='line-367'>367</a>   <span class="keyword">cluster</span> M|r -&gt; LambdaTerm-like;
<a class='lineno' href='#line-368' id='line-368'>368</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-369' id='line-369'>369</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-370' id='line-370'>370</a>     <span class="keyword">thus</span> dom (M|r) <span class="keyword">is</span> finite <span class="keyword">proof</span>
<a class='lineno' href='#line-371' id='line-371'>371</a>       dom M <span class="keyword">is</span> finite <span class="keyword">by</span> <span class="reference">Def1</span>;
<a class='lineno' href='#line-372' id='line-372'>372</a>       <span class="keyword">then</span> (dom M)|r <span class="keyword">is</span> finite;
<a class='lineno' href='#line-373' id='line-373'>373</a>       <span class="keyword">hence</span> <span class="keyword">thesis</span> <span class="keyword">by</span> <span class="reference">TREES_2:def 10</span>;
<a class='lineno' href='#line-374' id='line-374'>374</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-375' id='line-375'>375</a> 
<a class='lineno' href='#line-376' id='line-376'>376</a>     <span class="keyword">let</span> p <span class="keyword">be</span> FinSequence <span class="keyword">of</span> NAT;
<a class='lineno' href='#line-377' id='line-377'>377</a>     <span class="keyword">assume</span>
<a class='lineno' href='#line-378' id='line-378'>378</a>   A3: p <span class="keyword">in</span> dom (M|r);
<a class='lineno' href='#line-379' id='line-379'>379</a>     <span class="keyword">thus</span> p <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1} <span class="keyword">proof</span>
<a class='lineno' href='#line-380' id='line-380'>380</a>       dom (M|r) = (dom M)|r <span class="keyword">by</span> <span class="reference">TREES_2:def 10</span>;
<a class='lineno' href='#line-381' id='line-381'>381</a>       <span class="keyword">then</span> p <span class="keyword">in</span> (dom M)|r <span class="keyword">by</span> A3;
<a class='lineno' href='#line-382' id='line-382'>382</a>       <span class="keyword">then</span> r^p <span class="keyword">in</span> dom M <span class="keyword">by</span> <span class="reference">TREES_1:def 6</span>;
<a class='lineno' href='#line-383' id='line-383'>383</a>       <span class="keyword">then</span> r^p <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1} <span class="keyword">by</span> <span class="reference">Def1</span>;
<a class='lineno' href='#line-384' id='line-384'>384</a>       <span class="keyword">hence</span> <span class="keyword">thesis</span> <span class="keyword">by</span> <span class="reference">FINSEQ_1:36</span>;
<a class='lineno' href='#line-385' id='line-385'>385</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-386' id='line-386'>386</a> 
<a class='lineno' href='#line-387' id='line-387'>387</a>     <span class="comment">:: r^p^&lt;*0*&gt;</span>
<a class='lineno' href='#line-388' id='line-388'>388</a> <span class="set-keyword">    <span class="keyword">set</span></span> p0 = p^&lt;*0*&gt;;
<a class='lineno' href='#line-389' id='line-389'>389</a> <span class="set-keyword">    <span class="keyword">set</span></span> p1 = p^&lt;*1*&gt;;
<a class='lineno' href='#line-390' id='line-390'>390</a> <span class="set-keyword">    <span class="keyword">set</span></span> rp = r^p;
<a class='lineno' href='#line-391' id='line-391'>391</a>     <span class="keyword">assume</span>
<a class='lineno' href='#line-392' id='line-392'>392</a>   A4: p0 <span class="keyword">in</span> dom (M|r);
<a class='lineno' href='#line-393' id='line-393'>393</a>     <span class="keyword">assume</span>
<a class='lineno' href='#line-394' id='line-394'>394</a>   A9: p1 <span class="keyword">in</span> dom (M|r);
<a class='lineno' href='#line-395' id='line-395'>395</a>     <span class="keyword">thus</span> (M|r).p = 0 <span class="keyword">proof</span>
<a class='lineno' href='#line-396' id='line-396'>396</a>     A6: rp^&lt;*0*&gt; <span class="keyword">in</span> dom M
<a class='lineno' href='#line-397' id='line-397'>397</a>       <span class="keyword">proof</span>
<a class='lineno' href='#line-398' id='line-398'>398</a>         dom (M|r) <span class="keyword">is</span> Tree-like;
<a class='lineno' href='#line-399' id='line-399'>399</a>         <span class="keyword">then</span> p0 <span class="keyword">in</span> dom (M|r) <span class="keyword">by</span> A4, <span class="reference">TREES_1:21</span>;
<a class='lineno' href='#line-400' id='line-400'>400</a>         <span class="keyword">then</span> <span class="keyword">reconsider</span> p0 <span class="keyword">as</span> Element <span class="keyword">of</span> dom (M|r);
<a class='lineno' href='#line-401' id='line-401'>401</a>         <span class="keyword">reconsider</span> p0 <span class="keyword">as</span> Element <span class="keyword">of</span> (dom M)|r <span class="keyword">by</span> <span class="reference">TREES_2:def 10</span>;
<a class='lineno' href='#line-402' id='line-402'>402</a>         p0 <span class="keyword">in</span> (dom M)|r;
<a class='lineno' href='#line-403' id='line-403'>403</a>         <span class="keyword">then</span> r^p0 <span class="keyword">in</span> dom M <span class="keyword">by</span> <span class="reference">TREES_1:def 6</span>;
<a class='lineno' href='#line-404' id='line-404'>404</a>         <span class="keyword">hence</span> <span class="keyword">thesis</span> <span class="keyword">by</span> <span class="reference">FINSEQ_1:32</span>;
<a class='lineno' href='#line-405' id='line-405'>405</a>       <span class="keyword">end</span>;
<a class='lineno' href='#line-406' id='line-406'>406</a>     A7: rp^&lt;*1*&gt; <span class="keyword">in</span> dom M
<a class='lineno' href='#line-407' id='line-407'>407</a>       <span class="keyword">proof</span>
<a class='lineno' href='#line-408' id='line-408'>408</a>         dom (M|r) <span class="keyword">is</span> Tree-like;
<a class='lineno' href='#line-409' id='line-409'>409</a>         <span class="keyword">then</span> p1 <span class="keyword">in</span> dom (M|r) <span class="keyword">by</span> A9, <span class="reference">TREES_1:21</span>;
<a class='lineno' href='#line-410' id='line-410'>410</a>         <span class="keyword">then</span> <span class="keyword">reconsider</span> p1 <span class="keyword">as</span> Element <span class="keyword">of</span> dom (M|r);
<a class='lineno' href='#line-411' id='line-411'>411</a>         <span class="keyword">reconsider</span> p1 <span class="keyword">as</span> Element <span class="keyword">of</span> (dom M)|r <span class="keyword">by</span> <span class="reference">TREES_2:def 10</span>;
<a class='lineno' href='#line-412' id='line-412'>412</a>         p1 <span class="keyword">in</span> (dom M)|r;
<a class='lineno' href='#line-413' id='line-413'>413</a>         <span class="keyword">then</span> r^p1 <span class="keyword">in</span> dom M <span class="keyword">by</span> <span class="reference">TREES_1:def 6</span>;
<a class='lineno' href='#line-414' id='line-414'>414</a>         <span class="keyword">then</span> rp^&lt;*1*&gt; <span class="keyword">in</span> dom M <span class="keyword">by</span> <span class="reference">FINSEQ_1:32</span>;
<a class='lineno' href='#line-415' id='line-415'>415</a>         <span class="keyword">hence</span> <span class="keyword">thesis</span> <span class="keyword">by</span> <span class="reference">FINSEQ_1:32</span>;
<a class='lineno' href='#line-416' id='line-416'>416</a>       <span class="keyword">end</span>;
<a class='lineno' href='#line-417' id='line-417'>417</a>       rp <span class="keyword">in</span> dom M <span class="keyword">by</span> <span class="reference">TREES_1:21</span>, A6, A7;
<a class='lineno' href='#line-418' id='line-418'>418</a>       <span class="keyword">then</span> M.rp = 0 <span class="keyword">by</span> A6, A7, <span class="reference">Def1</span>;
<a class='lineno' href='#line-419' id='line-419'>419</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-420' id='line-420'>420</a>     A8: M.(r^p) = 0;
<a class='lineno' href='#line-421' id='line-421'>421</a>       p <span class="keyword">in</span> (dom M)|r <span class="keyword">by</span> A3, <span class="reference">TREES_2:def 10</span>;
<a class='lineno' href='#line-422' id='line-422'>422</a>       <span class="keyword">then</span> (M|r).p = M.(r^p) <span class="keyword">by</span> <span class="reference">TREES_2:def 10</span>;
<a class='lineno' href='#line-423' id='line-423'>423</a>       <span class="keyword">hence</span> (M|r).p = 0 <span class="keyword">by</span> A8, <span class="reference">TREES_2:def 10</span>;
<a class='lineno' href='#line-424' id='line-424'>424</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-425' id='line-425'>425</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-426' id='line-426'>426</a> <span class="keyword">end</span>;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-10">
              
                <p>Let Mizar know that <code>P with-replacement (p,Q)</code> is also a <code>LambdaTerm</code>.
First we prove a slightly more general theorem about the ranges of
 composed <code>DecoratedTree</code>s, and add this knowledge to the type system.</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-431' id='line-431'>431</a> <span class="keyword">reserve</span> X <span class="keyword">for</span> set,
<a class='lineno' href='#line-432' id='line-432'>432</a>         D1,D2 <span class="keyword">for</span> DecoratedTree,
<a class='lineno' href='#line-433' id='line-433'>433</a>         p <span class="keyword">for</span> Element <span class="keyword">of</span> dom D1;
<a class='lineno' href='#line-434' id='line-434'>434</a> 
<a class='lineno' href='#line-435' id='line-435'>435</a> <span class="keyword">theorem</span> Th1:
<a class='lineno' href='#line-436' id='line-436'>436</a>   D1 <span class="keyword">is</span> X-valued &amp; D2 <span class="keyword">is</span> Y-valued <span class="keyword">implies</span>
<a class='lineno' href='#line-437' id='line-437'>437</a>     D1 with-replacement (p,D2) <span class="keyword">is</span> (X \/ Y)-valued
<a class='lineno' href='#line-438' id='line-438'>438</a> <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-439' id='line-439'>439</a>   <span class="keyword">assume</span>
<a class='lineno' href='#line-440' id='line-440'>440</a> A4: D1 <span class="keyword">is</span> X-valued;
<a class='lineno' href='#line-441' id='line-441'>441</a>   <span class="keyword">assume</span>
<a class='lineno' href='#line-442' id='line-442'>442</a> A5: D2 <span class="keyword">is</span> Y-valued;
<a class='lineno' href='#line-443' id='line-443'>443</a> <span class="set-keyword">  <span class="keyword">set</span></span> D = D1 with-replacement (p,D2);
<a class='lineno' href='#line-444' id='line-444'>444</a> <span class="set-keyword">  <span class="keyword">set</span></span> T = dom D;
<a class='lineno' href='#line-445' id='line-445'>445</a>   rng D c= X \/ Y
<a class='lineno' href='#line-446' id='line-446'>446</a>   <span class="keyword">proof</span>
<a class='lineno' href='#line-447' id='line-447'>447</a>     <span class="keyword">let</span> x <span class="keyword">be</span> set;
<a class='lineno' href='#line-448' id='line-448'>448</a>     <span class="keyword">assume</span> x <span class="keyword">in</span> rng D;
<a class='lineno' href='#line-449' id='line-449'>449</a>     <span class="keyword">then</span> <span class="keyword">ex</span> q <span class="keyword">being</span> set <span class="keyword">st</span> [q,x] <span class="keyword">in</span> D <span class="keyword">by</span> <span class="reference">RELAT_1:def 5</span>;
<a class='lineno' href='#line-450' id='line-450'>450</a>     <span class="keyword">then</span> <span class="keyword">consider</span> q <span class="keyword">being</span> set <span class="keyword">such</span> <span class="keyword">that</span>
<a class='lineno' href='#line-451' id='line-451'>451</a>   A1: [q,x] <span class="keyword">in</span> D;
<a class='lineno' href='#line-452' id='line-452'>452</a>   A2: q <span class="keyword">in</span> T <span class="keyword">by</span> A1, <span class="reference">RELAT_1:def 4</span>;
<a class='lineno' href='#line-453' id='line-453'>453</a>     T <span class="keyword">is</span> Tree <span class="keyword">by</span> <span class="reference">TREES_2:def 8</span>;
<a class='lineno' href='#line-454' id='line-454'>454</a>     <span class="keyword">then</span> <span class="keyword">reconsider</span> q <span class="keyword">as</span> FinSequence <span class="keyword">of</span> NAT <span class="keyword">by</span> A2, <span class="reference">TREES_1:19</span>;
<a class='lineno' href='#line-455' id='line-455'>455</a>   A13: T = dom D1 with-replacement (p, dom D2) <span class="keyword">by</span> <span class="reference">TREES_2:def 11</span>;
<a class='lineno' href='#line-456' id='line-456'>456</a>     <span class="keyword">then</span>
<a class='lineno' href='#line-457' id='line-457'>457</a>   A3: ((<span class="keyword">not</span> p is_a_prefix_of q &amp; D.q = D1.q) <span class="keyword">or</span>
<a class='lineno' href='#line-458' id='line-458'>458</a>       (<span class="keyword">ex</span> r <span class="keyword">st</span> r <span class="keyword">in</span> dom D2 &amp; q = p^r &amp; D.q = D2.r)) <span class="keyword">by</span> A2, <span class="reference">TREES_2:def 11</span>;
<a class='lineno' href='#line-459' id='line-459'>459</a>     <span class="keyword">per</span> <span class="keyword">cases</span>;
<a class='lineno' href='#line-460' id='line-460'>460</a>     <span class="keyword">suppose</span>
<a class='lineno' href='#line-461' id='line-461'>461</a>     A6: (<span class="keyword">not</span> p is_a_prefix_of q &amp; D.q = D1.q);
<a class='lineno' href='#line-462' id='line-462'>462</a>       [q,x] <span class="keyword">in</span> D <span class="keyword">by</span> A1;
<a class='lineno' href='#line-463' id='line-463'>463</a>       <span class="keyword">then</span> D.q = x <span class="keyword">by</span> A2, <span class="reference">FUNCT_1:def 2</span>;
<a class='lineno' href='#line-464' id='line-464'>464</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-465' id='line-465'>465</a>     A7: D1.q = x <span class="keyword">by</span> A6;
<a class='lineno' href='#line-466' id='line-466'>466</a>     A12: q <span class="keyword">in</span> dom D1
<a class='lineno' href='#line-467' id='line-467'>467</a>       <span class="keyword">proof</span>
<a class='lineno' href='#line-468' id='line-468'>468</a>       A14: (q <span class="keyword">in</span> dom D1 &amp; <span class="keyword">not</span> p is_a_proper_prefix_of q <span class="keyword">or</span>
<a class='lineno' href='#line-469' id='line-469'>469</a>           <span class="keyword">ex</span> r <span class="keyword">st</span> r <span class="keyword">in</span> dom D2 &amp; q = p^r) <span class="keyword">by</span> A2, A13, <span class="reference">TREES_1:def 9</span>;
<a class='lineno' href='#line-470' id='line-470'>470</a>         <span class="keyword">per</span> <span class="keyword">cases</span>;
<a class='lineno' href='#line-471' id='line-471'>471</a>         <span class="keyword">suppose</span> q <span class="keyword">in</span> dom D1 &amp; <span class="keyword">not</span> p is_a_proper_prefix_of q;
<a class='lineno' href='#line-472' id='line-472'>472</a>           <span class="keyword">hence</span> q <span class="keyword">in</span> dom D1;
<a class='lineno' href='#line-473' id='line-473'>473</a>         <span class="keyword">end</span>;
<a class='lineno' href='#line-474' id='line-474'>474</a>         <span class="keyword">suppose</span> <span class="keyword">not</span> (q <span class="keyword">in</span> dom D1 &amp; <span class="keyword">not</span> p is_a_proper_prefix_of q);
<a class='lineno' href='#line-475' id='line-475'>475</a>           <span class="keyword">then</span> <span class="keyword">ex</span> r <span class="keyword">st</span> r <span class="keyword">in</span> dom D2 &amp; q = p^r <span class="keyword">by</span> A14;
<a class='lineno' href='#line-476' id='line-476'>476</a>           <span class="keyword">then</span>
<a class='lineno' href='#line-477' id='line-477'>477</a>         A15: p is_a_prefix_of q <span class="keyword">by</span> <span class="reference">TREES_1:1</span>;
<a class='lineno' href='#line-478' id='line-478'>478</a>           <span class="keyword">assume</span> <span class="keyword">not</span> q <span class="keyword">in</span> dom D1;
<a class='lineno' href='#line-479' id='line-479'>479</a>           <span class="keyword">thus</span> <span class="keyword">contradiction</span> <span class="keyword">by</span> A6, A15;
<a class='lineno' href='#line-480' id='line-480'>480</a>         <span class="keyword">end</span>;
<a class='lineno' href='#line-481' id='line-481'>481</a>       <span class="keyword">end</span>;
<a class='lineno' href='#line-482' id='line-482'>482</a>       [q,x] <span class="keyword">in</span> D1 <span class="keyword">by</span> A7, A12, <span class="reference">FUNCT_1:def 2</span>;
<a class='lineno' href='#line-483' id='line-483'>483</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-484' id='line-484'>484</a>     A8: x <span class="keyword">in</span> rng D1 <span class="keyword">by</span> <span class="reference">RELAT_1:def 5</span>;
<a class='lineno' href='#line-485' id='line-485'>485</a>       rng D1 c= X <span class="keyword">by</span> A4, <span class="reference">RELAT_1:def 19</span>;
<a class='lineno' href='#line-486' id='line-486'>486</a>       <span class="keyword">then</span> x <span class="keyword">in</span> X <span class="keyword">by</span> A8;
<a class='lineno' href='#line-487' id='line-487'>487</a>       <span class="keyword">hence</span> x <span class="keyword">in</span> (X \/ Y) <span class="keyword">by</span> <span class="reference">XBOOLE_0:def 3</span>;
<a class='lineno' href='#line-488' id='line-488'>488</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-489' id='line-489'>489</a>     <span class="keyword">suppose</span> <span class="keyword">not</span> (<span class="keyword">not</span> p is_a_prefix_of q &amp; D.q = D1.q);
<a class='lineno' href='#line-490' id='line-490'>490</a>       <span class="keyword">then</span> (<span class="keyword">ex</span> r <span class="keyword">st</span> r <span class="keyword">in</span> dom D2 &amp; q = p^r &amp; D.q = D2.r) <span class="keyword">by</span> A3;
<a class='lineno' href='#line-491' id='line-491'>491</a>       <span class="keyword">then</span> <span class="keyword">consider</span> r <span class="keyword">such</span> <span class="keyword">that</span>
<a class='lineno' href='#line-492' id='line-492'>492</a>     A9: r <span class="keyword">in</span> dom D2 &amp; q = p^r &amp; D.q = D2.r;
<a class='lineno' href='#line-493' id='line-493'>493</a>       [q,x] <span class="keyword">in</span> D <span class="keyword">by</span> A1;
<a class='lineno' href='#line-494' id='line-494'>494</a>       <span class="keyword">then</span> D.q = x <span class="keyword">by</span> A2, <span class="reference">FUNCT_1:def 2</span>;
<a class='lineno' href='#line-495' id='line-495'>495</a>       <span class="keyword">then</span> D2.r = x <span class="keyword">by</span> A9;
<a class='lineno' href='#line-496' id='line-496'>496</a>       <span class="keyword">then</span> [r,x] <span class="keyword">in</span> D2 <span class="keyword">by</span> A9, <span class="reference">FUNCT_1:def 2</span>;
<a class='lineno' href='#line-497' id='line-497'>497</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-498' id='line-498'>498</a>     A11: x <span class="keyword">in</span> rng D2 <span class="keyword">by</span> <span class="reference">RELAT_1:def 5</span>;
<a class='lineno' href='#line-499' id='line-499'>499</a>       rng D2 c= Y <span class="keyword">by</span> A5, <span class="reference">RELAT_1:def 19</span>;
<a class='lineno' href='#line-500' id='line-500'>500</a>       <span class="keyword">then</span> x <span class="keyword">in</span> Y <span class="keyword">by</span> A11;
<a class='lineno' href='#line-501' id='line-501'>501</a>       <span class="keyword">hence</span> x <span class="keyword">in</span> (X \/ Y) <span class="keyword">by</span> <span class="reference">XBOOLE_0:def 3</span>;
<a class='lineno' href='#line-502' id='line-502'>502</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-503' id='line-503'>503</a>   <span class="keyword">end</span>;
<a class='lineno' href='#line-504' id='line-504'>504</a>   <span class="keyword">hence</span> <span class="keyword">thesis</span> <span class="keyword">by</span> <span class="reference">RELAT_1:def 19</span>;
<a class='lineno' href='#line-505' id='line-505'>505</a> <span class="keyword">end</span></span>;
<a class='lineno' href='#line-506' id='line-506'>506</a> 
<a class='lineno' href='#line-507' id='line-507'>507</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-508' id='line-508'>508</a>   <span class="keyword">let</span> P,Q <span class="keyword">be</span> LambdaTerm,
<a class='lineno' href='#line-509' id='line-509'>509</a>       p <span class="keyword">be</span> Element <span class="keyword">of</span> dom P;
<a class='lineno' href='#line-510' id='line-510'>510</a> 
<a class='lineno' href='#line-511' id='line-511'>511</a>   <span class="keyword">cluster</span> P with-replacement (p,Q) -&gt; NAT-valued;
<a class='lineno' href='#line-512' id='line-512'>512</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-513' id='line-513'>513</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-514' id='line-514'>514</a>   A1: P <span class="keyword">is</span> NAT-valued <span class="keyword">by</span> <span class="reference">Def1</span>;
<a class='lineno' href='#line-515' id='line-515'>515</a>   A2: Q <span class="keyword">is</span> NAT-valued <span class="keyword">by</span> <span class="reference">Def1</span>;
<a class='lineno' href='#line-516' id='line-516'>516</a>     P with-replacement (p,Q) <span class="keyword">is</span> (NAT \/ NAT)-valued <span class="keyword">by</span> A1, A2, Th1;
<a class='lineno' href='#line-517' id='line-517'>517</a>     <span class="keyword">hence</span> P with-replacement (p,Q) <span class="keyword">is</span> NAT-valued <span class="keyword">by</span> <span class="reference">XBOOLE_0:def 3</span>;
<a class='lineno' href='#line-518' id='line-518'>518</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-519' id='line-519'>519</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-520' id='line-520'>520</a> 
<a class='lineno' href='#line-521' id='line-521'>521</a> <span class="keyword">reserve</span> R <span class="keyword">for</span> DecoratedTree,
<a class='lineno' href='#line-522' id='line-522'>522</a>         p <span class="keyword">for</span> Element <span class="keyword">of</span> dom P;
<a class='lineno' href='#line-523' id='line-523'>523</a> 
<a class='lineno' href='#line-524' id='line-524'>524</a> <span class="keyword">theorem</span> Th2:
<a class='lineno' href='#line-525' id='line-525'>525</a>   P with-replacement (p,Q) <span class="keyword">is</span> LambdaTerm-like
<a class='lineno' href='#line-526' id='line-526'>526</a> <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-527' id='line-527'>527</a> <span class="set-keyword">  <span class="keyword">set</span></span> R = P with-replacement (p,Q);
<a class='lineno' href='#line-528' id='line-528'>528</a>   <span class="keyword">thus</span> dom R <span class="keyword">is</span> finite
<a class='lineno' href='#line-529' id='line-529'>529</a>   <span class="keyword">proof</span>
<a class='lineno' href='#line-530' id='line-530'>530</a>   A1: dom P <span class="keyword">is</span> finite <span class="keyword">by</span> <span class="reference">Def1</span>;
<a class='lineno' href='#line-531' id='line-531'>531</a>   A2: dom Q <span class="keyword">is</span> finite <span class="keyword">by</span> <span class="reference">Def1</span>;
<a class='lineno' href='#line-532' id='line-532'>532</a>     dom R = (dom P) with-replacement (p,dom Q) <span class="keyword">by</span> <span class="reference">TREES_2:def 11</span>;
<a class='lineno' href='#line-533' id='line-533'>533</a>     <span class="keyword">hence</span> <span class="keyword">thesis</span> <span class="keyword">by</span> A1, A2;
<a class='lineno' href='#line-534' id='line-534'>534</a>   <span class="keyword">end</span>;
<a class='lineno' href='#line-535' id='line-535'>535</a> 
<a class='lineno' href='#line-536' id='line-536'>536</a>   <span class="keyword">let</span> r;
<a class='lineno' href='#line-537' id='line-537'>537</a>   <span class="keyword">assume</span>
<a class='lineno' href='#line-538' id='line-538'>538</a> A3: r <span class="keyword">in</span> dom R;
<a class='lineno' href='#line-539' id='line-539'>539</a>   <span class="keyword">thus</span> r <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1}
<a class='lineno' href='#line-540' id='line-540'>540</a>   <span class="keyword">proof</span>
<a class='lineno' href='#line-541' id='line-541'>541</a>     dom R = (dom P) with-replacement (p,dom Q) <span class="keyword">by</span> <span class="reference">TREES_2:def 11</span>;
<a class='lineno' href='#line-542' id='line-542'>542</a>     <span class="keyword">then</span>
<a class='lineno' href='#line-543' id='line-543'>543</a>   A4: ((r <span class="keyword">in</span> dom P &amp; <span class="keyword">not</span> p is_a_proper_prefix_of r) <span class="keyword">or</span>
<a class='lineno' href='#line-544' id='line-544'>544</a>       (<span class="keyword">ex</span> q <span class="keyword">st</span> q <span class="keyword">in</span> dom Q &amp; r = p^q)) <span class="keyword">by</span> A3, <span class="reference">TREES_1:def 9</span>;
<a class='lineno' href='#line-545' id='line-545'>545</a>     <span class="keyword">per</span> <span class="keyword">cases</span>;
<a class='lineno' href='#line-546' id='line-546'>546</a>     <span class="keyword">suppose</span> (r <span class="keyword">in</span> dom P &amp; <span class="keyword">not</span> p is_a_proper_prefix_of r);
<a class='lineno' href='#line-547' id='line-547'>547</a>       <span class="keyword">hence</span> r <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1} <span class="keyword">by</span> <span class="reference">Def1</span>;
<a class='lineno' href='#line-548' id='line-548'>548</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-549' id='line-549'>549</a>     <span class="keyword">suppose</span> <span class="keyword">not</span> (r <span class="keyword">in</span> dom P &amp; <span class="keyword">not</span> p is_a_proper_prefix_of r);
<a class='lineno' href='#line-550' id='line-550'>550</a>       <span class="keyword">then</span> (<span class="keyword">ex</span> q <span class="keyword">st</span> q <span class="keyword">in</span> dom Q &amp; r = p^q) <span class="keyword">by</span> A4;
<a class='lineno' href='#line-551' id='line-551'>551</a>       <span class="keyword">then</span> <span class="keyword">consider</span> q <span class="keyword">such</span> <span class="keyword">that</span>
<a class='lineno' href='#line-552' id='line-552'>552</a>     A5: q <span class="keyword">in</span> dom Q &amp; r = p^q;
<a class='lineno' href='#line-553' id='line-553'>553</a>       q <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1} <span class="keyword">by</span> A5, <span class="reference">Def1</span>;
<a class='lineno' href='#line-554' id='line-554'>554</a>       <span class="keyword">then</span> <span class="keyword">reconsider</span> q <span class="keyword">as</span> FinSequence <span class="keyword">of</span> {0,1};
<a class='lineno' href='#line-555' id='line-555'>555</a>       p <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1} <span class="keyword">by</span> <span class="reference">Def1</span>;
<a class='lineno' href='#line-556' id='line-556'>556</a>       <span class="keyword">then</span> <span class="keyword">reconsider</span> p <span class="keyword">as</span> FinSequence <span class="keyword">of</span> {0,1};
<a class='lineno' href='#line-557' id='line-557'>557</a>       p^q <span class="keyword">is</span> FinSequence <span class="keyword">of</span> {0,1};
<a class='lineno' href='#line-558' id='line-558'>558</a>       <span class="keyword">hence</span> <span class="keyword">thesis</span> <span class="keyword">by</span> A5;
<a class='lineno' href='#line-559' id='line-559'>559</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-560' id='line-560'>560</a>   <span class="keyword">end</span>;
<a class='lineno' href='#line-561' id='line-561'>561</a> <span class="set-keyword">  <span class="keyword">set</span></span> r0 = r^&lt;*0*&gt;;
<a class='lineno' href='#line-562' id='line-562'>562</a> <span class="set-keyword">  <span class="keyword">set</span></span> r1 = r^&lt;*1*&gt;;
<a class='lineno' href='#line-563' id='line-563'>563</a>   <span class="keyword">assume</span>
<a class='lineno' href='#line-564' id='line-564'>564</a> A6: r0 <span class="keyword">in</span> dom R;
<a class='lineno' href='#line-565' id='line-565'>565</a>   <span class="keyword">assume</span>
<a class='lineno' href='#line-566' id='line-566'>566</a> A32: r1 <span class="keyword">in</span> dom R;
<a class='lineno' href='#line-567' id='line-567'>567</a>   r0 <span class="keyword">in</span> (dom P) with-replacement (p,dom Q) <span class="keyword">by</span> A6, <span class="reference">TREES_2:def 11</span>;
<a class='lineno' href='#line-568' id='line-568'>568</a>   <span class="keyword">then</span>
<a class='lineno' href='#line-569' id='line-569'>569</a> A7: ((r0 <span class="keyword">in</span> (dom P) &amp; <span class="keyword">not</span> p is_a_proper_prefix_of r0) <span class="keyword">or</span>
<a class='lineno' href='#line-570' id='line-570'>570</a>      (<span class="keyword">ex</span> q <span class="keyword">st</span> q <span class="keyword">in</span> (dom Q) &amp; r0 = p^q)) <span class="keyword">by</span> <span class="reference">TREES_1:def 9</span>;
<a class='lineno' href='#line-571' id='line-571'>571</a>   <span class="keyword">per</span> <span class="keyword">cases</span>;
<a class='lineno' href='#line-572' id='line-572'>572</a>   <span class="keyword">suppose</span>
<a class='lineno' href='#line-573' id='line-573'>573</a>   A13: (r0 <span class="keyword">in</span> (dom P) &amp; <span class="keyword">not</span> p is_a_proper_prefix_of r0);
<a class='lineno' href='#line-574' id='line-574'>574</a>     <span class="keyword">then</span>
<a class='lineno' href='#line-575' id='line-575'>575</a>   A8: r0 <span class="keyword">in</span> dom P;
<a class='lineno' href='#line-576' id='line-576'>576</a>     <span class="keyword">then</span>
<a class='lineno' href='#line-577' id='line-577'>577</a>   A12: r <span class="keyword">in</span> dom P <span class="keyword">by</span> <span class="reference">TREES_1:21</span>;
<a class='lineno' href='#line-578' id='line-578'>578</a>     <span class="keyword">then</span>
<a class='lineno' href='#line-579' id='line-579'>579</a>   A9: P.r = 0 <span class="keyword">by</span> A8, <span class="reference">Def1</span>; <span class="comment">:: -&gt; named vars transition error</span>
<a class='lineno' href='#line-580' id='line-580'>580</a> <span class="error">::&gt;            *4</span>
<a class='lineno' href='#line-581' id='line-581'>581</a>   A10: <span class="keyword">not</span> p is_a_prefix_of r
<a class='lineno' href='#line-582' id='line-582'>582</a>     <span class="keyword">proof</span>
<a class='lineno' href='#line-583' id='line-583'>583</a>       <span class="keyword">assume</span> p is_a_prefix_of r;
<a class='lineno' href='#line-584' id='line-584'>584</a>       <span class="keyword">then</span> p is_a_proper_prefix_of r0 <span class="keyword">by</span> <span class="reference">TREES_1:8</span>;
<a class='lineno' href='#line-585' id='line-585'>585</a>       <span class="keyword">hence</span> <span class="keyword">contradiction</span> <span class="keyword">by</span> A13;
<a class='lineno' href='#line-586' id='line-586'>586</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-587' id='line-587'>587</a>     R.r = P.r <span class="keyword">by</span> A10, A12, <span class="reference">TREES_3:45</span>;
<a class='lineno' href='#line-588' id='line-588'>588</a>     <span class="keyword">hence</span> R.r = 0 <span class="keyword">by</span> A9;
<a class='lineno' href='#line-589' id='line-589'>589</a>   <span class="keyword">end</span>;
<a class='lineno' href='#line-590' id='line-590'>590</a>   <span class="keyword">suppose</span> <span class="keyword">not</span> (r0 <span class="keyword">in</span> (dom P) &amp; <span class="keyword">not</span> p is_a_proper_prefix_of r0);
<a class='lineno' href='#line-591' id='line-591'>591</a>     <span class="keyword">then</span> (<span class="keyword">ex</span> q <span class="keyword">st</span> q <span class="keyword">in</span> (dom Q) &amp; r0 = p^q) <span class="keyword">by</span> A7;
<a class='lineno' href='#line-592' id='line-592'>592</a>     <span class="keyword">then</span> <span class="keyword">consider</span> q <span class="keyword">such</span> <span class="keyword">that</span>
<a class='lineno' href='#line-593' id='line-593'>593</a>   A14: q <span class="keyword">in</span> (dom Q) &amp; r0 = p^q;
<a class='lineno' href='#line-594' id='line-594'>594</a>     <span class="keyword">per</span> <span class="keyword">cases</span>;
<a class='lineno' href='#line-595' id='line-595'>595</a>     <span class="keyword">suppose</span> <span class="keyword">ex</span> q2 <span class="keyword">being</span> FinSequence, n <span class="keyword">being</span> set <span class="keyword">st</span> q = q2^&lt;*n*&gt;;
<a class='lineno' href='#line-596' id='line-596'>596</a>       <span class="keyword">then</span> <span class="keyword">consider</span> q2 <span class="keyword">being</span> FinSequence, n <span class="keyword">being</span> set <span class="keyword">such</span> <span class="keyword">that</span>
<a class='lineno' href='#line-597' id='line-597'>597</a>     A15: q = q2^&lt;*n*&gt;;
<a class='lineno' href='#line-598' id='line-598'>598</a>       q2 <span class="keyword">is</span> FinSequence <span class="keyword">of</span> NAT <span class="keyword">by</span> A15, <span class="reference">FINSEQ_1:36</span>;
<a class='lineno' href='#line-599' id='line-599'>599</a>       <span class="keyword">then</span> <span class="keyword">reconsider</span> q2 <span class="keyword">as</span> FinSequence <span class="keyword">of</span> NAT;
<a class='lineno' href='#line-600' id='line-600'>600</a>       r^&lt;*0*&gt; = r0
<a class='lineno' href='#line-601' id='line-601'>601</a>         .= p^q <span class="keyword">by</span> A14
<a class='lineno' href='#line-602' id='line-602'>602</a>         .= p^(q2^&lt;*n*&gt;) <span class="keyword">by</span> A15
<a class='lineno' href='#line-603' id='line-603'>603</a>         .= (p^q2)^&lt;*n*&gt; <span class="keyword">by</span> <span class="reference">FINSEQ_1:32</span>;
<a class='lineno' href='#line-604' id='line-604'>604</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-605' id='line-605'>605</a>     A19: r = (p^q2) &amp; &lt;*0*&gt; = &lt;*n*&gt; <span class="keyword">by</span> <span class="reference">FINSEQ_2:17</span>;
<a class='lineno' href='#line-606' id='line-606'>606</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-607' id='line-607'>607</a>     A16: 0 = n <span class="keyword">by</span> <span class="reference">FINSEQ_1:76</span>;
<a class='lineno' href='#line-608' id='line-608'>608</a>       q <span class="keyword">in</span> dom Q <span class="keyword">by</span> A14;
<a class='lineno' href='#line-609' id='line-609'>609</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-610' id='line-610'>610</a>     A17: q2^&lt;*0*&gt; <span class="keyword">in</span> dom Q <span class="keyword">by</span> A14, A15, A16;
<a class='lineno' href='#line-611' id='line-611'>611</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-612' id='line-612'>612</a>     A18: q2 <span class="keyword">in</span> dom Q <span class="keyword">by</span> <span class="reference">TREES_1:21</span>;
<a class='lineno' href='#line-613' id='line-613'>613</a>       <span class="keyword">then</span> Q.q2 = 0 <span class="keyword">by</span> <span class="reference">Def1</span>, A17; <span class="comment">:: -&gt; named vars transition error</span>
<a class='lineno' href='#line-614' id='line-614'>614</a> <span class="error">::&gt;                  *4</span>
<a class='lineno' href='#line-615' id='line-615'>615</a>       <span class="keyword">then</span> R.(p^q2) = 0 <span class="keyword">by</span> A18, <span class="reference">TREES_3:46</span>;
<a class='lineno' href='#line-616' id='line-616'>616</a>       <span class="keyword">hence</span> R.r = 0 <span class="keyword">by</span> A19;
<a class='lineno' href='#line-617' id='line-617'>617</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-618' id='line-618'>618</a>     <span class="keyword">suppose</span>
<a class='lineno' href='#line-619' id='line-619'>619</a>     A20: <span class="keyword">not</span> <span class="keyword">ex</span> q2 <span class="keyword">being</span> FinSequence, n <span class="keyword">being</span> set <span class="keyword">st</span> q = q2^&lt;*n*&gt;;
<a class='lineno' href='#line-620' id='line-620'>620</a>     A21: q = {}
<a class='lineno' href='#line-621' id='line-621'>621</a>       <span class="keyword">proof</span>
<a class='lineno' href='#line-622' id='line-622'>622</a>         <span class="keyword">assume</span> q &lt;&gt; {};
<a class='lineno' href='#line-623' id='line-623'>623</a>         <span class="keyword">then</span> <span class="keyword">ex</span> q2 <span class="keyword">being</span> FinSequence,
<a class='lineno' href='#line-624' id='line-624'>624</a>           n <span class="keyword">being</span> set <span class="keyword">st</span> q = q2^&lt;*n*&gt; <span class="keyword">by</span> <span class="reference">FINSEQ_1:46</span>;
<a class='lineno' href='#line-625' id='line-625'>625</a>         <span class="keyword">hence</span> <span class="keyword">contradiction</span> <span class="keyword">by</span> A20;
<a class='lineno' href='#line-626' id='line-626'>626</a>       <span class="keyword">end</span>;
<a class='lineno' href='#line-627' id='line-627'>627</a>     A30: r0 = p <span class="keyword">by</span> A14, A21, <span class="reference">FINSEQ_1:34</span>;
<a class='lineno' href='#line-628' id='line-628'>628</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-629' id='line-629'>629</a>     A22: r0 <span class="keyword">in</span> dom P;
<a class='lineno' href='#line-630' id='line-630'>630</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-631' id='line-631'>631</a>     A23: r <span class="keyword">in</span> dom P <span class="keyword">by</span> A22, <span class="reference">TREES_1:21</span>;
<a class='lineno' href='#line-632' id='line-632'>632</a>       <span class="keyword">then</span>
<a class='lineno' href='#line-633' id='line-633'>633</a>     A24: P.r = 0 <span class="keyword">by</span> A22, <span class="reference">Def1</span>; <span class="comment">:: -&gt; named vars transition error</span>
<a class='lineno' href='#line-634' id='line-634'>634</a> <span class="error">::&gt;               *4</span>
<a class='lineno' href='#line-635' id='line-635'>635</a>     A27: <span class="keyword">not</span> p is_a_prefix_of r
<a class='lineno' href='#line-636' id='line-636'>636</a>       <span class="keyword">proof</span>
<a class='lineno' href='#line-637' id='line-637'>637</a>         <span class="keyword">assume</span> p is_a_prefix_of r;
<a class='lineno' href='#line-638' id='line-638'>638</a>         <span class="keyword">then</span>
<a class='lineno' href='#line-639' id='line-639'>639</a>       A28: p c= r;
<a class='lineno' href='#line-640' id='line-640'>640</a>         r0 = p <span class="keyword">by</span> A30;
<a class='lineno' href='#line-641' id='line-641'>641</a>         <span class="keyword">then</span> r0 c= p <span class="keyword">by</span> <span class="reference">XBOOLE_0:def 10</span>;
<a class='lineno' href='#line-642' id='line-642'>642</a>         <span class="keyword">then</span> r0 is_a_prefix_of p;
<a class='lineno' href='#line-643' id='line-643'>643</a>         <span class="keyword">then</span> r is_a_proper_prefix_of p <span class="keyword">by</span> <span class="reference">TREES_1:7</span>;
<a class='lineno' href='#line-644' id='line-644'>644</a>         <span class="keyword">then</span>
<a class='lineno' href='#line-645' id='line-645'>645</a>       A32: r c&lt; p;
<a class='lineno' href='#line-646' id='line-646'>646</a>         <span class="keyword">then</span> r c= p <span class="keyword">by</span> <span class="reference">XBOOLE_0:def 8</span>;
<a class='lineno' href='#line-647' id='line-647'>647</a>         <span class="keyword">then</span>
<a class='lineno' href='#line-648' id='line-648'>648</a>       A31: r = p <span class="keyword">by</span> A28, <span class="reference">XBOOLE_0:def 10</span>;
<a class='lineno' href='#line-649' id='line-649'>649</a>         r &lt;&gt; p <span class="keyword">by</span> A32, <span class="reference">XBOOLE_0:def 8</span>;
<a class='lineno' href='#line-650' id='line-650'>650</a>         <span class="keyword">hence</span> <span class="keyword">contradiction</span> <span class="keyword">by</span> A31;
<a class='lineno' href='#line-651' id='line-651'>651</a>       <span class="keyword">end</span>;
<a class='lineno' href='#line-652' id='line-652'>652</a>       R.r = P.r <span class="keyword">by</span> A23, A27, <span class="reference">TREES_3:45</span>;
<a class='lineno' href='#line-653' id='line-653'>653</a>       <span class="keyword">hence</span> R.r = 0 <span class="keyword">by</span> A24;
<a class='lineno' href='#line-654' id='line-654'>654</a>     <span class="keyword">end</span>;
<a class='lineno' href='#line-655' id='line-655'>655</a>   <span class="keyword">end</span>;
<a class='lineno' href='#line-656' id='line-656'>656</a> <span class="keyword">end</span></span>;
<a class='lineno' href='#line-657' id='line-657'>657</a> 
<a class='lineno' href='#line-658' id='line-658'>658</a> <span class="keyword">registration</span>
<a class='lineno' href='#line-659' id='line-659'>659</a>   <span class="keyword">let</span> P,Q <span class="keyword">be</span> LambdaTerm,
<a class='lineno' href='#line-660' id='line-660'>660</a>       p <span class="keyword">be</span> Element <span class="keyword">of</span> dom P;
<a class='lineno' href='#line-661' id='line-661'>661</a> 
<a class='lineno' href='#line-662' id='line-662'>662</a>   <span class="keyword">cluster</span> P with-replacement (p,Q) -&gt; LambdaTerm-like;
<a class='lineno' href='#line-663' id='line-663'>663</a>   <span class="keyword">coherence</span>
<a class='lineno' href='#line-664' id='line-664'>664</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-665' id='line-665'>665</a>     <span class="keyword">thus</span> <span class="keyword">thesis</span> <span class="keyword">by</span> Th2;
<a class='lineno' href='#line-666' id='line-666'>666</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-667' id='line-667'>667</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-668' id='line-668'>668</a> 
<a class='lineno' href='#line-669' id='line-669'>669</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-670' id='line-670'>670</a>   <span class="keyword">let</span> P <span class="keyword">be</span> LambdaTerm,
<a class='lineno' href='#line-671' id='line-671'>671</a>       p <span class="keyword">be</span> Element <span class="keyword">of</span> dom P,
<a class='lineno' href='#line-672' id='line-672'>672</a>       Q <span class="keyword">be</span> LambdaTerm;
<a class='lineno' href='#line-673' id='line-673'>673</a> 
<a class='lineno' href='#line-674' id='line-674'>674</a>   <span class="keyword">redefine</span> <span class="keyword">func</span> P with-replacement (p,Q) -&gt; LambdaTerm;
<a class='lineno' href='#line-675' id='line-675'>675</a>   <span class="keyword">coherence</span>;
<a class='lineno' href='#line-676' id='line-676'>676</a> <span class="keyword">end</span>;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-11">
              
                <h3 id="hd-1.2">
                  
                  <a href="#hd-1.2" class="headnumber">
                    1.2
                  </a>
                  
                  Helper definitions
                </h3>
              

              
            </div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-12">
              
                <p>Some helper definitions for working with lambda terms.</p>

              

              
            </div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-13">
              
                <h4 id="hd-1.2.1">
                  
                  <a href="#hd-1.2.1" class="headnumber">
                    1.2.1
                  </a>
                  
                  Variable occurences
                </h4>
              

              
                <ul class="vocabulary">
                
                
                <li class="type-pred"><a href="#line-686"><code>is_variable_in</code></a></li>
                
                
                <li class="type-pred"><a href="#line-691"><code>is_abstraction_in</code></a></li>
                
                
                <li class="type-pred"><a href="#line-696"><code>is_application_in</code></a></li>
                
                
                <li class="type-pred"><a href="#line-705"><code>M,r</code></a></li>
                
                
                <li class="type-pred"><a href="#line-710"><code>M,r</code></a></li>
                
                </ul>
              
            </div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-14">
              
                
              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-682' id='line-682'>682</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-683' id='line-683'>683</a>   <span class="keyword">let</span> M <span class="keyword">be</span> LambdaTerm,
<a class='lineno' href='#line-684' id='line-684'>684</a>       r; <span class="comment">:: be Node of M;</span>
<a class='lineno' href='#line-685' id='line-685'>685</a>   
<a class='lineno' href='#line-686' id='line-686'>686</a>   <span class="keyword">pred</span> r is_variable_in M <span class="keyword">means</span>
<a class='lineno' href='#line-687' id='line-687'>687</a>     :<span class="reference">Def5</span>:
<a class='lineno' href='#line-688' id='line-688'>688</a>     r <span class="keyword">in</span> dom M &amp;
<a class='lineno' href='#line-689' id='line-689'>689</a>     <span class="keyword">not</span> r^&lt;*0*&gt; <span class="keyword">in</span> dom M;
<a class='lineno' href='#line-690' id='line-690'>690</a> 
<a class='lineno' href='#line-691' id='line-691'>691</a>   <span class="keyword">pred</span> r is_abstraction_in M <span class="keyword">means</span>
<a class='lineno' href='#line-692' id='line-692'>692</a>     :<span class="reference">Def6</span>:
<a class='lineno' href='#line-693' id='line-693'>693</a>     r <span class="keyword">in</span> dom M &amp;
<a class='lineno' href='#line-694' id='line-694'>694</a>     r^&lt;*0*&gt; <span class="keyword">in</span> dom M &amp; <span class="keyword">not</span> r^&lt;*1*&gt; <span class="keyword">in</span> dom M;
<a class='lineno' href='#line-695' id='line-695'>695</a> 
<a class='lineno' href='#line-696' id='line-696'>696</a>   <span class="keyword">pred</span> r is_application_in M <span class="keyword">means</span>
<a class='lineno' href='#line-697' id='line-697'>697</a>     :<span class="reference">Def7</span>:
<a class='lineno' href='#line-698' id='line-698'>698</a>     r <span class="keyword">in</span> dom M &amp;
<a class='lineno' href='#line-699' id='line-699'>699</a>     r^&lt;*0*&gt; <span class="keyword">in</span> dom M &amp; r^&lt;*1*&gt; <span class="keyword">in</span> dom M;
<a class='lineno' href='#line-700' id='line-700'>700</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-701' id='line-701'>701</a> 
<a class='lineno' href='#line-702' id='line-702'>702</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-703' id='line-703'>703</a>   <span class="keyword">let</span> M,r,n;
<a class='lineno' href='#line-704' id='line-704'>704</a> 
<a class='lineno' href='#line-705' id='line-705'>705</a>   <span class="keyword">pred</span> M,r holds_variable n <span class="keyword">means</span>
<a class='lineno' href='#line-706' id='line-706'>706</a>     :<span class="reference">Def8</span>:
<a class='lineno' href='#line-707' id='line-707'>707</a>     r is_variable_in M &amp;
<a class='lineno' href='#line-708' id='line-708'>708</a>     M.r = n;
<a class='lineno' href='#line-709' id='line-709'>709</a> 
<a class='lineno' href='#line-710' id='line-710'>710</a>   <span class="keyword">pred</span> M,r abstracts n <span class="keyword">means</span>
<a class='lineno' href='#line-711' id='line-711'>711</a>     :<span class="reference">Def8</span>:
<a class='lineno' href='#line-712' id='line-712'>712</a>     r is_abstraction_in M &amp;
<a class='lineno' href='#line-713' id='line-713'>713</a>     M.r = n;
<a class='lineno' href='#line-714' id='line-714'>714</a> <span class="keyword">end</span>;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-15">
              
                <p>:definition
:  let M be LambdaTerm,
:      r be Node of M;
:<br>:  pred r is_active_variable_in M means
:    r is_variable_in M &amp;
:    M.r = abstr-depth (r,M);
:end;</p>

              

              
            </div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-16">
              
                <h4 id="hd-1.2.2">
                  
                  <a href="#hd-1.2.2" class="headnumber">
                    1.2.2
                  </a>
                  
                  Abstraction and application
                </h4>
              

              
                <ul class="vocabulary">
                
                
                <li class="type-func"><a href="#line-731"><code>Abs</code></a></li>
                
                
                <li class="type-func"><a href="#line-755"><code>App</code></a></li>
                
                
                <li class="type-func"><a href="#line-794"><code>N</code></a></li>
                
                </ul>
              
            </div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-17">
              
                <p>Then we can define abstraction and application</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-728' id='line-728'>728</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-729' id='line-729'>729</a>   <span class="keyword">let</span> n,M;
<a class='lineno' href='#line-730' id='line-730'>730</a>   
<a class='lineno' href='#line-731' id='line-731'>731</a>   <span class="keyword">func</span> Abs(n,M) -&gt; LambdaTerm <span class="keyword">means</span>
<a class='lineno' href='#line-732' id='line-732'>732</a>     it,(&lt;*&gt; NAT) abstracts n &amp;
<a class='lineno' href='#line-733' id='line-733'>733</a>     it|&lt;*0*&gt; = M &amp; <span class="keyword">not</span> &lt;*1*&gt; <span class="keyword">in</span> dom it;
<a class='lineno' href='#line-734' id='line-734'>734</a>   <span class="keyword">existence</span>
<a class='lineno' href='#line-735' id='line-735'>735</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-736' id='line-736'>736</a> <span class="set-keyword">    <span class="keyword">set</span></span> e = &lt;*0*&gt;;
<a class='lineno' href='#line-737' id='line-737'>737</a>     dom PreAbstractionTerm = { {}, &lt;*0*&gt; } <span class="keyword">by</span> <span class="reference">FUNCOP_1:13</span>;
<a class='lineno' href='#line-738' id='line-738'>738</a>     <span class="keyword">then</span> &lt;*0*&gt; <span class="keyword">in</span> dom PreAbstractionTerm <span class="keyword">by</span> <span class="reference">TARSKI:def 2</span>;
<a class='lineno' href='#line-739' id='line-739'>739</a>     <span class="keyword">then</span> <span class="keyword">reconsider</span> e <span class="keyword">as</span> Element <span class="keyword">of</span> dom PreAbstractionTerm;
<a class='lineno' href='#line-740' id='line-740'>740</a> <span class="set-keyword">    <span class="keyword">set</span></span> D = PreAbstractionTerm with-replacement (e, M);
<a class='lineno' href='#line-741' id='line-741'>741</a> 
<a class='lineno' href='#line-742' id='line-742'>742</a>     <span class="keyword">take</span> D;
<a class='lineno' href='#line-743' id='line-743'>743</a>     <span class="keyword">thus</span> D|&lt;*0*&gt; = M;
<a class='lineno' href='#line-744' id='line-744'>744</a> <span class="error">::&gt;      *51       *4</span>
<a class='lineno' href='#line-745' id='line-745'>745</a>     <span class="keyword">thus</span> <span class="keyword">not</span> &lt;*1*&gt; <span class="keyword">in</span> dom D;
<a class='lineno' href='#line-746' id='line-746'>746</a> <span class="error">::&gt;                       *4</span>
<a class='lineno' href='#line-747' id='line-747'>747</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-748' id='line-748'>748</a>   <span class="keyword">uniqueness</span>;
<a class='lineno' href='#line-749' id='line-749'>749</a> <span class="error">::&gt;        *4</span>
<a class='lineno' href='#line-750' id='line-750'>750</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-751' id='line-751'>751</a> 
<a class='lineno' href='#line-752' id='line-752'>752</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-753' id='line-753'>753</a>   <span class="keyword">let</span> M,N;
<a class='lineno' href='#line-754' id='line-754'>754</a> 
<a class='lineno' href='#line-755' id='line-755'>755</a>   <span class="keyword">func</span> App(M,N) -&gt; LambdaTerm <span class="keyword">means</span>
<a class='lineno' href='#line-756' id='line-756'>756</a>     it|&lt;*0*&gt; = M &amp; it|&lt;*1*&gt; = N;
<a class='lineno' href='#line-757' id='line-757'>757</a>   <span class="keyword">existence</span>
<a class='lineno' href='#line-758' id='line-758'>758</a>   <a class="keyword toggle-collapsible" href="#">proof</a><span class="collapsible">
<a class='lineno' href='#line-759' id='line-759'>759</a> <span class="set-keyword">    <span class="keyword">set</span></span> e0 = &lt;*0*&gt;;
<a class='lineno' href='#line-760' id='line-760'>760</a>     dom PreApplicationTerm = { {}, &lt;*0*&gt;, &lt;*1*&gt; } <span class="keyword">by</span> <span class="reference">FUNCOP_1:13</span>;
<a class='lineno' href='#line-761' id='line-761'>761</a>     <span class="keyword">then</span> &lt;*0*&gt; <span class="keyword">in</span> dom PreApplicationTerm <span class="keyword">by</span> <span class="reference">ENUMSET1:def 1</span>;
<a class='lineno' href='#line-762' id='line-762'>762</a>     <span class="keyword">then</span> <span class="keyword">reconsider</span> e0 <span class="keyword">as</span> Element <span class="keyword">of</span> dom PreApplicationTerm;
<a class='lineno' href='#line-763' id='line-763'>763</a> <span class="set-keyword">    <span class="keyword">set</span></span> preD = PreApplicationTerm with-replacement (e0, M);
<a class='lineno' href='#line-764' id='line-764'>764</a>     preD <span class="keyword">is</span> LambdaTerm;
<a class='lineno' href='#line-765' id='line-765'>765</a> <span class="set-keyword">
<a class='lineno' href='#line-766' id='line-766'>766</a>     <span class="keyword">set</span></span> e1 = &lt;*1*&gt;;
<a class='lineno' href='#line-767' id='line-767'>767</a>   A1: dom preD = (dom PreApplicationTerm) with-replacement (e0, dom M)
<a class='lineno' href='#line-768' id='line-768'>768</a>       <span class="keyword">by</span> <span class="reference">TREES_2:def 11</span>;
<a class='lineno' href='#line-769' id='line-769'>769</a>     dom PreApplicationTerm = { {}, &lt;*0*&gt;, &lt;*1*&gt; } <span class="keyword">by</span> <span class="reference">FUNCOP_1:13</span>;
<a class='lineno' href='#line-770' id='line-770'>770</a>     <span class="keyword">then</span>
<a class='lineno' href='#line-771' id='line-771'>771</a>   A2: &lt;*1*&gt; <span class="keyword">in</span> dom PreApplicationTerm <span class="keyword">by</span> <span class="reference">ENUMSET1:def 1</span>;
<a class='lineno' href='#line-772' id='line-772'>772</a>     <span class="keyword">not</span> e0 is_a_proper_prefix_of e1;
<a class='lineno' href='#line-773' id='line-773'>773</a> <span class="error">::&gt;                               *4</span>
<a class='lineno' href='#line-774' id='line-774'>774</a>     <span class="keyword">then</span> &lt;*1*&gt; <span class="keyword">in</span> dom preD <span class="keyword">by</span> A1, A2, <span class="reference">TREES_1:def 9</span>;
<a class='lineno' href='#line-775' id='line-775'>775</a>     <span class="keyword">then</span> <span class="keyword">reconsider</span> e1 <span class="keyword">as</span> Element <span class="keyword">of</span> dom preD;
<a class='lineno' href='#line-776' id='line-776'>776</a> <span class="set-keyword">    <span class="keyword">set</span></span> D = preD with-replacement (e1, N);
<a class='lineno' href='#line-777' id='line-777'>777</a>     D <span class="keyword">is</span> LambdaTerm;
<a class='lineno' href='#line-778' id='line-778'>778</a>     
<a class='lineno' href='#line-779' id='line-779'>779</a>     <span class="keyword">take</span> D;
<a class='lineno' href='#line-780' id='line-780'>780</a>     <span class="keyword">thus</span> D|&lt;*0*&gt; = M;
<a class='lineno' href='#line-781' id='line-781'>781</a> <span class="error">::&gt;                *4</span>
<a class='lineno' href='#line-782' id='line-782'>782</a>     <span class="keyword">thus</span> D|&lt;*1*&gt; = N;
<a class='lineno' href='#line-783' id='line-783'>783</a> <span class="error">::&gt;                *4</span>
<a class='lineno' href='#line-784' id='line-784'>784</a>   <span class="keyword">end</span></span>;
<a class='lineno' href='#line-785' id='line-785'>785</a>   <span class="keyword">uniqueness</span>;
<a class='lineno' href='#line-786' id='line-786'>786</a> <span class="error">::&gt;        *4</span>
<a class='lineno' href='#line-787' id='line-787'>787</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-788' id='line-788'>788</a> 
<a class='lineno' href='#line-789' id='line-789'>789</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-790' id='line-790'>790</a>   <span class="keyword">let</span> N,n,M;
<a class='lineno' href='#line-791' id='line-791'>791</a> 
<a class='lineno' href='#line-792' id='line-792'>792</a>   <span class="comment">:: TODO better definition with decorated tree replacements!</span>
<a class='lineno' href='#line-793' id='line-793'>793</a> 
<a class='lineno' href='#line-794' id='line-794'>794</a>   <span class="keyword">func</span> N with-substitution (n,M) -&gt; LambdaTerm <span class="keyword">means</span>
<a class='lineno' href='#line-795' id='line-795'>795</a>     it = N;
<a class='lineno' href='#line-796' id='line-796'>796</a> <span class="comment">::    :: most things are the same,</span>
<a class='lineno' href='#line-797' id='line-797'>797</a> <span class="comment">::    (for r st not (ex p being Element of dom N</span>
<a class='lineno' href='#line-798' id='line-798'>798</a> <span class="comment">::                      st p is_active_variable_in N &amp; p is_a_prefix_of r)</span>
<a class='lineno' href='#line-799' id='line-799'>799</a> <span class="comment">::           holds [r,x] in it iff [r,x] in N</span>
<a class='lineno' href='#line-800' id='line-800'>800</a> <span class="comment">::    ) &amp;</span>
<a class='lineno' href='#line-801' id='line-801'>801</a> <span class="comment">::    :: except that the active variables are replaced with M</span>
<a class='lineno' href='#line-802' id='line-802'>802</a> <span class="comment">::    (for r being Element of dom N</span>
<a class='lineno' href='#line-803' id='line-803'>803</a> <span class="comment">::            st r is_active_variable_in N</span>
<a class='lineno' href='#line-804' id='line-804'>804</a> <span class="comment">::            holds it|r = M);</span>
<a class='lineno' href='#line-805' id='line-805'>805</a>   <span class="keyword">existence</span>;
<a class='lineno' href='#line-806' id='line-806'>806</a>   <span class="keyword">uniqueness</span>;
<a class='lineno' href='#line-807' id='line-807'>807</a> <span class="keyword">end</span>;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-18">
              
                <h3 id="hd-1.3">
                  
                  <a href="#hd-1.3" class="headnumber">
                    1.3
                  </a>
                  
                  Reduction and conversion
                </h3>
              

              
                <ul class="vocabulary">
                
                
                <li class="type-pred"><a href="#line-818"><code>beta_shallow</code></a></li>
                
                
                <li class="type-pred"><a href="#line-840"><code>beta</code></a></li>
                
                
                <li class="type-pred"><a href="#line-855"><code>beta*</code></a></li>
                
                
                <li class="type-pred"><a href="#line-864"><code>beta=</code></a></li>
                
                </ul>
              
            </div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-19">
              
                <p>First I define <em>shallow</em> one-step beta substitution, which only
 states $(\lambda x.N)M \to_{\beta} N[x:=M]$.</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-814' id='line-814'>814</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-815' id='line-815'>815</a>   <span class="keyword">let</span> P,Q;
<a class='lineno' href='#line-816' id='line-816'>816</a>   
<a class='lineno' href='#line-817' id='line-817'>817</a>   <span class="comment">:: P === (\x.N)M --&gt; N[x:=M] === Q</span>
<a class='lineno' href='#line-818' id='line-818'>818</a>   <span class="keyword">pred</span> P beta_shallow Q <span class="keyword">means</span>
<a class='lineno' href='#line-819' id='line-819'>819</a>     <span class="keyword">ex</span> N,n,M <span class="keyword">st</span>
<a class='lineno' href='#line-820' id='line-820'>820</a>       <span class="comment">:: P === (\x.N)M</span>
<a class='lineno' href='#line-821' id='line-821'>821</a>       P = App(Abs(n,N),M) &amp;
<a class='lineno' href='#line-822' id='line-822'>822</a> 
<a class='lineno' href='#line-823' id='line-823'>823</a>       <span class="comment">:: Q === N[x:=M]</span>
<a class='lineno' href='#line-824' id='line-824'>824</a>       Q = N with-substitution (n,M);
<a class='lineno' href='#line-825' id='line-825'>825</a> <span class="keyword">end</span>;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-20">
              
                <p>Then we extend this ordinary one-step beta reduction, that is,
 any subterm is also allowed to reduce.</p>
<p>Note that I had to use a work-around here, where I have two
 set-theoretically identical elements <code>p</code> and <code>q</code>, but considered
 in Mizar as having different types to enable the two <code>|</code> operations
 to work. I also tried defining something like <code>Element of (dom M),(dom N)</code>,
 but this is extremely difficult, if not impossible.</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-835' id='line-835'>835</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-836' id='line-836'>836</a>   <span class="keyword">let</span> M,N;
<a class='lineno' href='#line-837' id='line-837'>837</a> 
<a class='lineno' href='#line-838' id='line-838'>838</a>   <span class="comment">:: TODO better definition with tree operations</span>
<a class='lineno' href='#line-839' id='line-839'>839</a> 
<a class='lineno' href='#line-840' id='line-840'>840</a>   <span class="keyword">pred</span> M beta N <span class="keyword">means</span>
<a class='lineno' href='#line-841' id='line-841'>841</a>     <span class="keyword">ex</span>
<a class='lineno' href='#line-842' id='line-842'>842</a>       p <span class="keyword">being</span> Element <span class="keyword">of</span> dom M,
<a class='lineno' href='#line-843' id='line-843'>843</a>       q <span class="keyword">being</span> Element <span class="keyword">of</span> dom N <span class="keyword">st</span>
<a class='lineno' href='#line-844' id='line-844'>844</a>         p = q &amp;
<a class='lineno' href='#line-845' id='line-845'>845</a>         M|p beta_shallow N|q &amp;
<a class='lineno' href='#line-846' id='line-846'>846</a>         <span class="keyword">for</span> q <span class="keyword">st</span> <span class="keyword">not</span> p is_a_prefix_of q <span class="keyword">holds</span>
<a class='lineno' href='#line-847' id='line-847'>847</a>           [r,x] <span class="keyword">in</span> M <span class="keyword">iff</span> [r,x] <span class="keyword">in</span> N;
<a class='lineno' href='#line-848' id='line-848'>848</a> <span class="keyword">end</span>;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-21">
              
                <p>We close the relation under transitivity and reflexivity
 to get the full beta reduction relation.</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-852' id='line-852'>852</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-853' id='line-853'>853</a>   <span class="keyword">let</span> M,N;
<a class='lineno' href='#line-854' id='line-854'>854</a>   
<a class='lineno' href='#line-855' id='line-855'>855</a>   <span class="keyword">pred</span> M beta* N <span class="keyword">means</span>
<a class='lineno' href='#line-856' id='line-856'>856</a>     M = N <span class="keyword">or</span>
<a class='lineno' href='#line-857' id='line-857'>857</a>     <span class="keyword">ex</span> P <span class="keyword">st</span> M beta P &amp; P beta N;
<a class='lineno' href='#line-858' id='line-858'>858</a> <span class="keyword">end</span>;</pre></div></div>
            
        </li>
        
        
        <li>
            <div class="annotation annotation-22">
              
                <p>And then close under symmetry to get beta conversion.</p>

              

              
            </div>
            
            <div class="content"><div class='highlight'><pre><a class='lineno' href='#line-861' id='line-861'>861</a> <span class="keyword">definition</span>
<a class='lineno' href='#line-862' id='line-862'>862</a>   <span class="keyword">let</span> M,N;
<a class='lineno' href='#line-863' id='line-863'>863</a>   
<a class='lineno' href='#line-864' id='line-864'>864</a>   <span class="keyword">pred</span> M beta= N <span class="keyword">means</span>
<a class='lineno' href='#line-865' id='line-865'>865</a>     M beta* N <span class="keyword">or</span> N beta* M;
<a class='lineno' href='#line-866' id='line-866'>866</a> <span class="keyword">end</span>;
<a class='lineno' href='#line-867' id='line-867'>867</a> 
<a class='lineno' href='#line-868' id='line-868'>868</a> <span class="error">::&gt;</span>
<a class='lineno' href='#line-869' id='line-869'>869</a> <span class="error">::&gt; 4: This inference is not accepted</span>
<a class='lineno' href='#line-870' id='line-870'>870</a> <span class="error">::&gt; 51: Invalid conclusion</span>
<a class='lineno' href='#line-871' id='line-871'>871</a> <span class="error">::&gt; 60: Something remains to be proved in this case</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { availableFonts: ["TeX"], scale: 90 }
  });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
$(function () {
  
  $(".collapsible").hide();
  $("a.toggle-collapsible").click(function () {
    $(this).next().toggle();
    return false;
  });

});
</script>
</body>
</html>
